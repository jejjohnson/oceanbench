

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>AlongTrack Evaluation &#8212; OceanBench</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/alongtrack/AlongTrack_Eval';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="XArrayDataset" href="../ml/xrdataset.html" />
    <link rel="prev" title="AlongTrack Data - SWOT" href="AlongTrack_SWOT.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../overview.html">
  
  
  
  
  
    <p class="title logo__title">OceanBench</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../overview.html">
                    OceanBench: Sea Surface Height Editions
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/TaskToPatcher.html">Get ML-ready dataset from Oceanbench task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/pytorch_dataset_integration_example.html">Pytorch Dataset Integration Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/PlotMaps.html">Plotting maps with ocean bench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/Leaderboards.html">Leaderboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/ocean_bench_4dvarnet.html">Evaluating an SSH Mapping algorithm using OceanBench and 4dvarnet-starter</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">GeoProcessing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geoprocess/gridded_data.html">Regridding Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geoprocess/scaling.html">Scaling Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geoprocess/physical_variables.html">Physical Variables</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AlongTrack</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="AlongTrack.html">AlongTrack Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="AlongTrack_SWOT.html">AlongTrack Data - SWOT</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">AlongTrack Evaluation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ml/xrdataset.html">XArrayDataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ml/pytorch_dataset.html">Pytorch Dataset Integration Demo</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Metrics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../metrics/power_spectrum.html">Power Spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/power_spectrum_score.html">Power Spectrum Score</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Visualization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../viz/pixel_densities.html">Pixel Densities</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Challenges</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../data_challenges/dc20a.html">OSSE 2020a</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_challenges/dc21a.html">OSE 2020a</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_challenges/dc23a.html">OSE 2023a</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/jejjohnson/oceanbench/blob/master/jbook/content/alongtrack/AlongTrack_Eval.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jejjohnson/oceanbench" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jejjohnson/oceanbench/issues/new?title=Issue%20on%20page%20%2Fcontent/alongtrack/AlongTrack_Eval.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/alongtrack/AlongTrack_Eval.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>AlongTrack Evaluation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#field">Field</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gridding">Gridding</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regridding">Regridding</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alongtrack-segments">AlongTrack Segments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#real-statistics">Real Statistics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics">Statistics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-statistics">Spectral Statistics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#power-spectrum">Power Spectrum</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#figure">Figure</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#power-spectrum-score">Power Spectrum Score</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolved-scale">Resolved Scale</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Figure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="alongtrack-evaluation">
<h1>AlongTrack Evaluation<a class="headerlink" href="#alongtrack-evaluation" title="Permalink to this headline">#</a></h1>
<blockquote>
<div><p>In this notebook, we look at how to evaluate alongtrack data. In the OSSE setting in previous notebooks, we saw that we can evaluate our method on the alongtracks and then compare our learned field with the field from the simulation. In the OSE setting, we don’t have the original field. So we need to evaluate the field directly on the leave-one-out alongtrack. We demonstrate some simple statistics in the real and spectral space that we can perform.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">autoroot</span>
<span class="kn">import</span> <span class="nn">typing</span> <span class="k">as</span> <span class="nn">tp</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span> <span class="nn">functools</span> <span class="k">as</span> <span class="nn">ft</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">einops</span>
<span class="kn">from</span> <span class="nn">metpy.units</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">import</span> <span class="nn">pint_xarray</span>
<span class="kn">import</span> <span class="nn">xarray_dataclasses</span> <span class="k">as</span> <span class="nn">xrdataclass</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.geoprocessing.validation</span> <span class="kn">import</span> <span class="n">validate_latlon</span><span class="p">,</span> <span class="n">validate_time</span><span class="p">,</span> <span class="n">decode_cf_time</span><span class="p">,</span> <span class="n">validate_ssh</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.preprocessing.alongtrack</span> <span class="kn">import</span> <span class="n">alongtrack_ssh</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.geoprocessing.subset</span> <span class="kn">import</span> <span class="n">where_slice</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.preprocessing.alongtrack</span> <span class="kn">import</span> <span class="n">remove_swath_dimension</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">colors</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">ticker</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">sns</span><span class="o">.</span><span class="n">reset_defaults</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;talk&quot;</span><span class="p">,</span> <span class="n">font_scale</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
</div>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span><span class="s2">&quot;/gpfswork/rech/yrf/commun/data_challenges/dc21a_ose/test/results&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>leaderboard.csv			  OSE_ssh_mapping_DUACS.nc
OSE_ssh_mapping_4dvarNet_2022.nc  OSE_ssh_mapping_DYMOST.nc
OSE_ssh_mapping_4dvarNet.nc	  OSE_ssh_mapping_MIOST.nc
OSE_ssh_mapping_BASELINE.nc	  results.csv
OSE_ssh_mapping_BFN.nc
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span>/gpfswork/rech/yrf/commun/data_challenges/dc21a_ose/test/test
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dt_gulfstream_c2_phy_l3_20161201-20180131_285-315_23-53.nc
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">oceanbench._src.geoprocessing.validation</span> <span class="kn">import</span> <span class="n">validate_latlon</span><span class="p">,</span> <span class="n">validate_time</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.preprocessing.alongtrack</span> <span class="kn">import</span> <span class="n">alongtrack_ssh</span>
<span class="kn">from</span> <span class="nn">oceanbench._src.geoprocessing.subset</span> <span class="kn">import</span> <span class="n">where_slice</span>



<span class="k">def</span> <span class="nf">preprocess_nadir</span><span class="p">(</span><span class="n">da</span><span class="p">):</span>
    
    <span class="c1"># reorganized</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
    
    <span class="c1"># validate coordinates</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;longitude&quot;</span><span class="p">:</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">:</span> <span class="s2">&quot;lat&quot;</span><span class="p">})</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">validate_latlon</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">validate_time</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    
    <span class="c1"># slice region</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">where_slice</span><span class="p">(</span><span class="n">da</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">64.975</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.007</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">where_slice</span><span class="p">(</span><span class="n">da</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mf">33.025</span><span class="p">,</span> <span class="mf">42.9917</span><span class="p">)</span>
    
    <span class="c1"># slice time period</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2017-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2017-12-31&quot;</span><span class="p">))</span>
    
    <span class="c1"># calculate SSH directly</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">alongtrack_ssh</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">da</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">files_nadir_dc21a</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;/gpfswork/rech/yrf/commun/data_challenges/dc21a_ose/test/test/dt_gulfstream_c2_phy_l3_20161201-20180131_285-315_23-53.nc&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_nadir</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span>
    <span class="n">files_nadir_dc21a</span><span class="p">,</span> 
    <span class="n">preprocess</span><span class="o">=</span><span class="n">preprocess_nadir</span><span class="p">,</span>
    <span class="n">combine</span><span class="o">=</span><span class="s2">&quot;nested&quot;</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;netcdf4&quot;</span><span class="p">,</span>
    <span class="n">concat_dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>


<span class="n">ds_nadir</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:         (time: 49859)
Coordinates:
  * time            (time) datetime64[ns] 2017-01-01T08:08:42.012641024 ... 2...
    lon             (time) float64 -62.61 -62.61 -62.62 ... -62.09 -62.1 -62.1
    lat             (time) float64 33.03 33.09 33.15 33.2 ... 42.83 42.89 42.95
Data variables:
    cycle           (time) float64 88.0 88.0 88.0 88.0 ... 101.0 101.0 101.0
    track           (time) float64 701.0 701.0 701.0 701.0 ... 353.0 353.0 353.0
    dac             (time) float32 -0.1647 -0.1648 -0.165 ... 0.03 0.0314 0.0327
    lwe             (time) float32 0.003 0.003 0.003 ... -0.029 -0.029 -0.029
    mdt             (time) float32 0.593 0.592 0.591 ... -0.165 -0.164 -0.163
    ocean_tide      (time) float64 -0.3407 -0.3413 -0.342 ... -0.1686 -0.1693
    sla_filtered    (time) float32 -0.136 -0.16 -0.18 -0.194 ... 0.105 0.102 0.1
    sla_unfiltered  (time) float32 -0.151 -0.119 -0.158 ... 0.081 0.097 0.114
    ssh             (time) float32 0.439 0.47 0.43 0.404 ... -0.055 -0.038 -0.02
Attributes: (12/44)
    Conventions:                     CF-1.6
    Metadata_Conventions:            Unidata Dataset Discovery v1.0
    cdm_data_type:                   Swath
    comment:                         Sea surface height measured by altimeter...
    contact:                         servicedesk.cmems@mercator-ocean.eu
    creator_email:                   servicedesk.cmems@mercator-ocean.eu
    ...                              ...
    summary:                         SSALTO/DUACS Delayed-Time Level-3 sea su...
    time_coverage_duration:          P23H43M4.754863S
    time_coverage_end:               2016-01-01T23:11:03Z
    time_coverage_resolution:        P1S
    time_coverage_start:             2015-12-31T23:27:58Z
    title:                           DT Cryosat-2 Global Ocean Along track SS...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-9261f241-7d4d-4182-94ea-c5b1e22ca62b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9261f241-7d4d-4182-94ea-c5b1e22ca62b' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 49859</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-ed5c2c7d-e84a-43bf-9129-d08c5cabed0d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ed5c2c7d-e84a-43bf-9129-d08c5cabed0d' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-01-01T08:08:42.012641024 .....</div><input id='attrs-d1649b76-aebf-4e23-9db6-5897f4e43be0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d1649b76-aebf-4e23-9db6-5897f4e43be0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c58aff61-88d2-4938-bc02-8743ee02984a' class='xr-var-data-in' type='checkbox'><label for='data-c58aff61-88d2-4938-bc02-8743ee02984a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-01-01T08:08:42.012641024&#x27;, &#x27;2017-01-01T08:08:42.956040704&#x27;,
       &#x27;2017-01-01T08:08:43.899440896&#x27;, ..., &#x27;2017-12-31T14:00:07.582296064&#x27;,
       &#x27;2017-12-31T14:00:08.525696000&#x27;, &#x27;2017-12-31T14:00:09.469096196&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-62.61 -62.61 ... -62.1 -62.1</div><input id='attrs-c8b0ed0a-344d-4acb-bc3c-a7354cf7f0bc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c8b0ed0a-344d-4acb-bc3c-a7354cf7f0bc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2efbff58-20b9-47df-9920-23b07edf1321' class='xr-var-data-in' type='checkbox'><label for='data-2efbff58-20b9-47df-9920-23b07edf1321' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Longitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([-62.607825, -62.614614, -62.621406, ..., -62.087724, -62.095418,
       -62.103118])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>33.03 33.09 33.15 ... 42.89 42.95</div><input id='attrs-33cce524-2527-411f-bd5a-ecc6bb5ddd12' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-33cce524-2527-411f-bd5a-ecc6bb5ddd12' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b1fcddb7-a9f7-4465-9cee-2f7a331315f6' class='xr-var-data-in' type='checkbox'><label for='data-b1fcddb7-a9f7-4465-9cee-2f7a331315f6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Latitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([33.032793, 33.089933, 33.147072, ..., 42.83481 , 42.892003,
       42.949195])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c27798bb-c559-4719-a015-9d4e0c9bc695' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c27798bb-c559-4719-a015-9d4e0c9bc695' class='xr-section-summary' >Data variables: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>cycle</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>88.0 88.0 88.0 ... 101.0 101.0</div><input id='attrs-7d8f071f-7c68-48ec-99e3-eda29326a7a3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7d8f071f-7c68-48ec-99e3-eda29326a7a3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1577f47f-0c0d-442d-aea0-778e58ac3767' class='xr-var-data-in' type='checkbox'><label for='data-1577f47f-0c0d-442d-aea0-778e58ac3767' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Cycle the measurement belongs to</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([ 88.,  88.,  88., ..., 101., 101., 101.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>track</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>701.0 701.0 701.0 ... 353.0 353.0</div><input id='attrs-042227ad-5cb0-484c-94da-fb247383ac0d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-042227ad-5cb0-484c-94da-fb247383ac0d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-69c46898-2405-41c2-bd0b-54440f63f921' class='xr-var-data-in' type='checkbox'><label for='data-69c46898-2405-41c2-bd0b-54440f63f921' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Track in cycle the measurement belongs to</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([701., 701., 701., ..., 353., 353., 353.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dac</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.1647 -0.1648 ... 0.0314 0.0327</div><input id='attrs-7c0b7e16-e954-4acd-aef1-382fb96bed7a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7c0b7e16-e954-4acd-aef1-382fb96bed7a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9286c474-6c49-4657-a41e-617f5fbe1975' class='xr-var-data-in' type='checkbox'><label for='data-9286c474-6c49-4657-a41e-617f5fbe1975' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The sla in this file is already corrected for the dac; the uncorrected sla can be computed as follows: [uncorrected sla]=[sla from product]+[dac]; see the product user manual for details</dd><dt><span>long_name :</span></dt><dd>Dynamic Atmospheric Correction</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([-0.1647    , -0.1648    , -0.16499999, ...,  0.03      ,
        0.0314    ,  0.0327    ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lwe</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.003 0.003 0.003 ... -0.029 -0.029</div><input id='attrs-426ed46d-3cd0-40e0-8920-f85e1b960177' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-426ed46d-3cd0-40e0-8920-f85e1b960177' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6171bede-0915-492f-b151-f89c564bd1de' class='xr-var-data-in' type='checkbox'><label for='data-6171bede-0915-492f-b151-f89c564bd1de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The sla in this file is already corrected for the lwe; the uncorrected sla can be computed as follows: [uncorrected sla]=[sla from product]-[lwe]; see the product user manual for details</dd><dt><span>long_name :</span></dt><dd>Long wavelength error</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([ 0.003,  0.003,  0.003, ..., -0.029, -0.029, -0.029], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>mdt</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.593 0.592 0.591 ... -0.164 -0.163</div><input id='attrs-7e1281fd-7a42-4250-bf66-7b69f63e6f27' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7e1281fd-7a42-4250-bf66-7b69f63e6f27' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7ced8699-f619-4fd8-a39a-aff63dc9ff78' class='xr-var-data-in' type='checkbox'><label for='data-7ced8699-f619-4fd8-a39a-aff63dc9ff78' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The mean dynamic topography is the sea surface height above geoid; it is used to compute the absolute dynamic tyopography adt=sla+mdt</dd><dt><span>long_name :</span></dt><dd>Mean dynamic topography</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height_above_geoid</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([ 0.59300005,  0.592     ,  0.591     , ..., -0.165     ,
       -0.164     , -0.163     ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ocean_tide</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.3407 -0.3413 ... -0.1686 -0.1693</div><input id='attrs-d7dbc683-93d6-45e3-aa37-6536bcd6b438' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d7dbc683-93d6-45e3-aa37-6536bcd6b438' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-84ad97c7-f745-4844-a9c9-4e0476de8cea' class='xr-var-data-in' type='checkbox'><label for='data-84ad97c7-f745-4844-a9c9-4e0476de8cea' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The sla in this file is already corrected for the ocean_tide; the uncorrected sla can be computed as follows: [uncorrected sla]=[sla from product]+[ocean_tide]; see the product user manual for details</dd><dt><span>long_name :</span></dt><dd>Ocean tide model</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([-0.3407, -0.3413, -0.342 , ..., -0.1662, -0.1686, -0.1693])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sla_filtered</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.136 -0.16 -0.18 ... 0.102 0.1</div><input id='attrs-fa665076-3966-4910-afb7-a15b87a5b747' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fa665076-3966-4910-afb7-a15b87a5b747' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3edc3ed3-d978-4614-a76b-10b45dd06539' class='xr-var-data-in' type='checkbox'><label for='data-3edc3ed3-d978-4614-a76b-10b45dd06539' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The sea level anomaly is the sea surface height above mean sea surface height; the uncorrected sla can be computed as follows: [uncorrected sla]=[sla from product]+[dac]+[ocean_tide]-[lwe]; see the product user manual for details</dd><dt><span>long_name :</span></dt><dd>Sea level anomaly filtered not-subsampled with dac, ocean_tide and lwe correction applied</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height_above_sea_level</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([-0.13599999, -0.16      , -0.17999999, ...,  0.105     ,
        0.102     ,  0.09999999], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sla_unfiltered</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.151 -0.119 ... 0.097 0.114</div><input id='attrs-327d0f7f-7a06-4786-b936-be3d19b5116f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-327d0f7f-7a06-4786-b936-be3d19b5116f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-eccbdc87-f2b3-4324-abdd-b928393e0efb' class='xr-var-data-in' type='checkbox'><label for='data-eccbdc87-f2b3-4324-abdd-b928393e0efb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>comment :</span></dt><dd>The sea level anomaly is the sea surface height above mean sea surface height; the uncorrected sla can be computed as follows: [uncorrected sla]=[sla from product]+[dac]+[ocean_tide]-[lwe]; see the product user manual for details</dd><dt><span>long_name :</span></dt><dd>Sea level anomaly not-filtered not-subsampled with dac, ocean_tide and lwe correction applied</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height_above_sea_level</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([-0.15100001, -0.119     , -0.158     , ...,  0.081     ,
        0.097     ,  0.11400001], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.439 0.47 0.43 ... -0.038 -0.02</div><input id='attrs-a65b1646-0e98-4f73-ba7e-40e8134d29a3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a65b1646-0e98-4f73-ba7e-40e8134d29a3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-85d3454d-7c26-4910-822d-7a357ab9b38c' class='xr-var-data-in' type='checkbox'><label for='data-85d3454d-7c26-4910-822d-7a357ab9b38c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0.43900004,  0.47      ,  0.43000004, ..., -0.05500001,
       -0.038     , -0.01999999], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9d0c7a66-31ef-43cf-bd8a-5686c5ee92ed' class='xr-section-summary-in' type='checkbox'  ><label for='section-9d0c7a66-31ef-43cf-bd8a-5686c5ee92ed' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-fcd1a6de-e369-46ca-a31a-6c1937e5c75d' class='xr-index-data-in' type='checkbox'/><label for='index-fcd1a6de-e369-46ca-a31a-6c1937e5c75d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-01-01 08:08:42.012641024&#x27;,
               &#x27;2017-01-01 08:08:42.956040704&#x27;,
               &#x27;2017-01-01 08:08:43.899440896&#x27;,
               &#x27;2017-01-01 08:08:44.842840832&#x27;,
               &#x27;2017-01-01 08:08:45.786241024&#x27;,
               &#x27;2017-01-01 08:08:46.729640704&#x27;,
               &#x27;2017-01-01 08:08:47.673040896&#x27;,
               &#x27;2017-01-01 08:08:48.616440832&#x27;,
               &#x27;2017-01-01 08:08:49.559841024&#x27;,
               &#x27;2017-01-01 08:08:50.503240960&#x27;,
               ...
               &#x27;2017-12-31 14:00:00.978496256&#x27;,
               &#x27;2017-12-31 14:00:01.921896192&#x27;,
               &#x27;2017-12-31 14:00:02.865296384&#x27;,
               &#x27;2017-12-31 14:00:03.808696064&#x27;,
                  &#x27;2017-12-31 14:00:04.752096&#x27;,
               &#x27;2017-12-31 14:00:05.695496192&#x27;,
               &#x27;2017-12-31 14:00:06.638896128&#x27;,
               &#x27;2017-12-31 14:00:07.582296064&#x27;,
                  &#x27;2017-12-31 14:00:08.525696&#x27;,
               &#x27;2017-12-31 14:00:09.469096196&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=49859, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5d66d2e5-f4d5-4c7b-b7b6-cad26626048d' class='xr-section-summary-in' type='checkbox'  ><label for='section-5d66d2e5-f4d5-4c7b-b7b6-cad26626048d' class='xr-section-summary' >Attributes: <span>(44)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Metadata_Conventions :</span></dt><dd>Unidata Dataset Discovery v1.0</dd><dt><span>cdm_data_type :</span></dt><dd>Swath</dd><dt><span>comment :</span></dt><dd>Sea surface height measured by altimeters referenced to the [1993, 2012] period; with additional corrections; the proposed sla is already corrected for dac, ocean_tide and lwe; [uncorrected sla]=[sla from product]+[dac]+[ocean_tide]-[lwe]</dd><dt><span>contact :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_email :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_name :</span></dt><dd>CMEMS - Sea Level Thematic Assembly Center</dd><dt><span>creator_url :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>date_created :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_issued :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_modified :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>geospatial_lat_max :</span></dt><dd>82.252703</dd><dt><span>geospatial_lat_min :</span></dt><dd>-69.84683</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>0.05649700000000024</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.997542</dd><dt><span>geospatial_lon_min :</span></dt><dd>0.010983</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>0.006772999999999474</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>geospatial_vertical_max :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_min :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_positive :</span></dt><dd>down</dd><dt><span>geospatial_vertical_resolution :</span></dt><dd>point</dd><dt><span>geospatial_vertical_units :</span></dt><dd>m</dd><dt><span>history :</span></dt><dd>2019-03-28T08:33:58Z: Creation</dd><dt><span>institution :</span></dt><dd>CLS, CNES</dd><dt><span>keywords :</span></dt><dd>Oceans &gt; Ocean Topography &gt; Sea Surface Height</dd><dt><span>keywords_vocabulary :</span></dt><dd>NetCDF COARDS Climate and Forecast Standard Names</dd><dt><span>license :</span></dt><dd>http://marine.copernicus.eu/web/27-service-commitments-and-licence.php</dd><dt><span>platform :</span></dt><dd>Cryosat-2</dd><dt><span>processing_level :</span></dt><dd>L3</dd><dt><span>product_version :</span></dt><dd>2019</dd><dt><span>project :</span></dt><dd>COPERNICUS MARINE ENVIRONMENT MONITORING SERVICE (CMEMS)</dd><dt><span>references :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>software_version :</span></dt><dd>6.2_DUACS_DT2018_baseline</dd><dt><span>source :</span></dt><dd>Cryosat-2 measurements</dd><dt><span>ssalto_duacs_comment :</span></dt><dd>The reference mission used for the altimeter inter-calibration processing is Topex/Poseidon between 1993-01-01 and 2002-04-23, Jason-1 between 2002-04-24 and 2008-10-18, OSTM/Jason-2 between 2008-10-19 and 2016-06-25, Jason-3 since 2016-06-25.</dd><dt><span>standard_name_vocabulary :</span></dt><dd>NetCDF Climate and Forecast (CF) Metadata Convention Standard Name Table v37</dd><dt><span>summary :</span></dt><dd>SSALTO/DUACS Delayed-Time Level-3 sea surface height measured by Cryosat-2 altimetry observations over Global Ocean.</dd><dt><span>time_coverage_duration :</span></dt><dd>P23H43M4.754863S</dd><dt><span>time_coverage_end :</span></dt><dd>2016-01-01T23:11:03Z</dd><dt><span>time_coverage_resolution :</span></dt><dd>P1S</dd><dt><span>time_coverage_start :</span></dt><dd>2015-12-31T23:27:58Z</dd><dt><span>title :</span></dt><dd>DT Cryosat-2 Global Ocean Along track SSALTO/DUACS Sea Surface Height L3 product</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">sub_ds</span> <span class="o">=</span> <span class="n">ds_nadir</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2017-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2017-01-15&quot;</span><span class="p">))</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">sub_ds</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">sub_ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">sub_ds</span><span class="o">.</span><span class="n">ssh</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="n">ds_nadir</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">ds_nadir</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">max</span><span class="p">()],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="n">ds_nadir</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">ds_nadir</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">max</span><span class="p">()],</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sea Surface Height [m]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/a906261325edca6b7d762788c48cac660f9dc26cc94b74e2701db83c8f9c55f3.png" src="../../_images/a906261325edca6b7d762788c48cac660f9dc26cc94b74e2701db83c8f9c55f3.png" />
</div>
</div>
</section>
<section id="field">
<h2>Field<a class="headerlink" href="#field" title="Permalink to this headline">#</a></h2>
<p>Now, we will load a field from a method that interpolated the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># !ls /gpfswork/rech/yrf/commun/data_challenges/dc20a_osse/staging/natl60/</span>
<span class="o">!</span>ls<span class="w"> </span>/gpfswork/rech/yrf/commun/data_challenges/dc21a_ose/test/results
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>leaderboard.csv			  OSE_ssh_mapping_DUACS.nc
OSE_ssh_mapping_4dvarNet_2022.nc  OSE_ssh_mapping_DYMOST.nc
OSE_ssh_mapping_4dvarNet.nc	  OSE_ssh_mapping_MIOST.nc
OSE_ssh_mapping_BASELINE.nc	  results.csv
OSE_ssh_mapping_BFN.nc
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">preprocess_field</span><span class="p">(</span><span class="n">da</span><span class="p">):</span>
    
    <span class="c1"># validate coordinates</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">validate_latlon</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">validate_time</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">validate_ssh</span><span class="p">(</span><span class="n">da</span><span class="p">)</span>
    
    <span class="c1"># select region + time period</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span>
        <span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2017-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2017-12-31&quot;</span><span class="p">),</span>
        <span class="n">lon</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="o">-</span><span class="mf">65.</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.</span><span class="p">),</span>
        <span class="n">lat</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mf">33.</span><span class="p">,</span> <span class="mf">43.</span><span class="p">),</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">da</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gridding">
<h2>Gridding<a class="headerlink" href="#gridding" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_DUACS</span> <span class="o">=</span> <span class="s2">&quot;/gpfswork/rech/yrf/commun/data_challenges/dc21a_ose/test/results/OSE_ssh_mapping_DUACS.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>


<span class="n">ds_field</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span>
    <span class="n">file_DUACS</span><span class="p">,</span>
    <span class="n">decode_times</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">preprocess</span><span class="o">=</span><span class="n">preprocess_field</span><span class="p">,</span>
    <span class="n">combine</span><span class="o">=</span><span class="s2">&quot;nested&quot;</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;netcdf4&quot;</span><span class="p">,</span>
    <span class="n">concat_dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span>
<span class="p">)</span>

<span class="n">ds_field</span> <span class="o">=</span> <span class="n">ds_field</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="n">ds_field</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 23.7 ms, sys: 8.99 ms, total: 32.7 ms
Wall time: 67.8 ms
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (lat: 40, lon: 40, time: 365)
Coordinates:
  * lat      (lat) float64 33.12 33.38 33.62 33.88 ... 42.12 42.38 42.62 42.88
  * lon      (lon) float64 -64.88 -64.62 -64.38 -64.12 ... -55.62 -55.38 -55.12
  * time     (time) datetime64[ns] 2017-01-01 2017-01-02 ... 2017-12-31
Data variables:
    ssh      (time, lat, lon) float64 0.817 0.8275 0.8267 ... 0.08649 0.0524
Attributes:
    FileType:      GRID_DOTS
    OriginalName:  dt_upd_global_merged_msla_h_20170101_20170101_20190823.nc
    CreatedBy:     ballarm@node036.sis.cnes.fr
    CreatedOn:     23-AUG-2019 11:21:19:000000
    title:         SSALTO/DUACS - DT MSLA - Merged Product - Up-to-date Globa...
    history:       2019/08/23 11:21:19 ballarm@node036.sis.cnes.fr Import dep...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-12867d45-c0e1-41bf-a8e4-61e36ee71bcf' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-12867d45-c0e1-41bf-a8e4-61e36ee71bcf' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 40</li><li><span class='xr-has-index'>lon</span>: 40</li><li><span class='xr-has-index'>time</span>: 365</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-77f7c2de-89b8-4925-8d0c-d190e5712d16' class='xr-section-summary-in' type='checkbox'  checked><label for='section-77f7c2de-89b8-4925-8d0c-d190e5712d16' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>33.12 33.38 33.62 ... 42.62 42.88</div><input id='attrs-aa9ff6c8-0f4c-47c1-8286-9afaf3a289f1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-aa9ff6c8-0f4c-47c1-8286-9afaf3a289f1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-de5d047c-0b54-4299-be9c-d20cee359cfc' class='xr-var-data-in' type='checkbox'><label for='data-de5d047c-0b54-4299-be9c-d20cee359cfc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Latitudes</dd></dl></div><div class='xr-var-data'><pre>array([33.125, 33.375, 33.625, 33.875, 34.125, 34.375, 34.625, 34.875, 35.125,
       35.375, 35.625, 35.875, 36.125, 36.375, 36.625, 36.875, 37.125, 37.375,
       37.625, 37.875, 38.125, 38.375, 38.625, 38.875, 39.125, 39.375, 39.625,
       39.875, 40.125, 40.375, 40.625, 40.875, 41.125, 41.375, 41.625, 41.875,
       42.125, 42.375, 42.625, 42.875])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-64.88 -64.62 ... -55.38 -55.12</div><input id='attrs-8e821550-2b09-4bf1-b8c5-1d247d93e938' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8e821550-2b09-4bf1-b8c5-1d247d93e938' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e624b4a4-2138-4c92-b24e-68cdea4f99c0' class='xr-var-data-in' type='checkbox'><label for='data-e624b4a4-2138-4c92-b24e-68cdea4f99c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Longitudes</dd></dl></div><div class='xr-var-data'><pre>array([-64.875, -64.625, -64.375, -64.125, -63.875, -63.625, -63.375, -63.125,
       -62.875, -62.625, -62.375, -62.125, -61.875, -61.625, -61.375, -61.125,
       -60.875, -60.625, -60.375, -60.125, -59.875, -59.625, -59.375, -59.125,
       -58.875, -58.625, -58.375, -58.125, -57.875, -57.625, -57.375, -57.125,
       -56.875, -56.625, -56.375, -56.125, -55.875, -55.625, -55.375, -55.125])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-01-01 ... 2017-12-31</div><input id='attrs-1e113aa6-d760-427f-8c9c-b862f5f771f8' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1e113aa6-d760-427f-8c9c-b862f5f771f8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5488d844-96bc-4c78-b7e0-cde3cb5526db' class='xr-var-data-in' type='checkbox'><label for='data-5488d844-96bc-4c78-b7e0-cde3cb5526db' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-01-01T00:00:00.000000000&#x27;, &#x27;2017-01-02T00:00:00.000000000&#x27;,
       &#x27;2017-01-03T00:00:00.000000000&#x27;, ..., &#x27;2017-12-29T00:00:00.000000000&#x27;,
       &#x27;2017-12-30T00:00:00.000000000&#x27;, &#x27;2017-12-31T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6709ae99-7fa3-44b4-b0b9-fe4e92ca4163' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6709ae99-7fa3-44b4-b0b9-fe4e92ca4163' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.817 0.8275 ... 0.08649 0.0524</div><input id='attrs-a46f1606-d3aa-4200-b112-a292aeb5fb54' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a46f1606-d3aa-4200-b112-a292aeb5fb54' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5f9490cd-3036-4751-ad90-0f8ed9150dd4' class='xr-var-data-in' type='checkbox'><label for='data-5f9490cd-3036-4751-ad90-0f8ed9150dd4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height</dd><dt><span>long_name :</span></dt><dd>Sea Surface Height</dd></dl></div><div class='xr-var-data'><pre>array([[[ 8.17046742e-01,  8.27514862e-01,  8.26669258e-01, ...,
          5.91444416e-01,  5.69390200e-01,  5.67099419e-01],
        [ 8.24618027e-01,  8.36100959e-01,  8.39475020e-01, ...,
          5.51100663e-01,  5.34920521e-01,  5.43047843e-01],
        [ 8.08035086e-01,  8.29207826e-01,  8.46738212e-01, ...,
          5.10334168e-01,  4.96793341e-01,  5.09115076e-01],
        ...,
        [-5.11311590e-02, -5.88482068e-02, -5.99110669e-02, ...,
         -1.35347322e-01, -1.49161244e-01, -1.40957221e-01],
        [-2.36727296e-02, -3.07721458e-02, -3.87165545e-02, ...,
         -1.35030726e-01, -1.50401502e-01, -1.41297371e-01],
        [ 8.61049852e-03, -1.86020048e-04, -1.55262244e-02, ...,
         -1.13480400e-01, -1.45720472e-01, -1.37354081e-01]],

       [[ 8.16025431e-01,  8.22404255e-01,  8.23479069e-01, ...,
          5.78381942e-01,  5.57981515e-01,  5.63903809e-01],
        [ 8.22319568e-01,  8.32893618e-01,  8.37059095e-01, ...,
          5.38289455e-01,  5.28495322e-01,  5.40421735e-01],
        [ 8.14722414e-01,  8.31906844e-01,  8.45802493e-01, ...,
          4.97849245e-01,  4.95709356e-01,  5.10950748e-01],
...
        [-6.02529272e-02, -4.57092718e-02, -4.37417200e-02, ...,
          2.02647038e-01,  1.25605205e-01,  5.02284356e-02],
        [-4.97940219e-02, -3.66180129e-02, -3.30300255e-02, ...,
          1.64880266e-01,  8.96138165e-02,  3.25964274e-02],
        [-3.50247432e-02, -2.83791362e-02, -2.99249483e-02, ...,
          1.51291874e-01,  7.24994229e-02,  4.17794493e-02]],

       [[ 5.20208704e-01,  4.66653963e-01,  4.00358421e-01, ...,
          7.42787176e-01,  7.37612281e-01,  7.14371011e-01],
        [ 5.01854845e-01,  4.37117779e-01,  3.68943303e-01, ...,
          7.44572888e-01,  7.56830424e-01,  7.51449267e-01],
        [ 5.46587657e-01,  4.77981183e-01,  4.22241159e-01, ...,
          7.28263106e-01,  7.63143986e-01,  7.80524185e-01],
        ...,
        [-5.73130399e-02, -4.39545036e-02, -4.44530940e-02, ...,
          2.12240435e-01,  1.25187674e-01,  4.99812104e-02],
        [-4.42866794e-02, -3.25777568e-02, -2.96511574e-02, ...,
          1.81239983e-01,  1.06903306e-01,  4.48399218e-02],
        [-3.17379270e-02, -2.67240941e-02, -2.96163080e-02, ...,
          1.60004344e-01,  8.64877539e-02,  5.24041858e-02]]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a45ca6f6-9e55-44b6-9fc1-f10ee4c85861' class='xr-section-summary-in' type='checkbox'  ><label for='section-a45ca6f6-9e55-44b6-9fc1-f10ee4c85861' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-4b4e4c58-6134-4569-8edc-f0a07aaabf9b' class='xr-index-data-in' type='checkbox'/><label for='index-4b4e4c58-6134-4569-8edc-f0a07aaabf9b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([33.125, 33.375, 33.625, 33.875, 34.125, 34.375, 34.625, 34.875,
              35.125, 35.375, 35.625, 35.875, 36.125, 36.375, 36.625, 36.875,
              37.125, 37.375, 37.625, 37.875, 38.125, 38.375, 38.625, 38.875,
              39.125, 39.375, 39.625, 39.875, 40.125, 40.375, 40.625, 40.875,
              41.125, 41.375, 41.625, 41.875, 42.125, 42.375, 42.625, 42.875],
             dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e140fa91-b8d0-4dae-b13a-0684ca8e9838' class='xr-index-data-in' type='checkbox'/><label for='index-e140fa91-b8d0-4dae-b13a-0684ca8e9838' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([-64.875, -64.625, -64.375, -64.125, -63.875, -63.625, -63.375,
              -63.125, -62.875, -62.625, -62.375, -62.125, -61.875, -61.625,
              -61.375, -61.125, -60.875, -60.625, -60.375, -60.125, -59.875,
              -59.625, -59.375, -59.125, -58.875, -58.625, -58.375, -58.125,
              -57.875, -57.625, -57.375, -57.125, -56.875, -56.625, -56.375,
              -56.125, -55.875, -55.625, -55.375, -55.125],
             dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-35bb53da-e88a-469c-b7dd-f905791a0a74' class='xr-index-data-in' type='checkbox'/><label for='index-35bb53da-e88a-469c-b7dd-f905791a0a74' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-01-01&#x27;, &#x27;2017-01-02&#x27;, &#x27;2017-01-03&#x27;, &#x27;2017-01-04&#x27;,
               &#x27;2017-01-05&#x27;, &#x27;2017-01-06&#x27;, &#x27;2017-01-07&#x27;, &#x27;2017-01-08&#x27;,
               &#x27;2017-01-09&#x27;, &#x27;2017-01-10&#x27;,
               ...
               &#x27;2017-12-22&#x27;, &#x27;2017-12-23&#x27;, &#x27;2017-12-24&#x27;, &#x27;2017-12-25&#x27;,
               &#x27;2017-12-26&#x27;, &#x27;2017-12-27&#x27;, &#x27;2017-12-28&#x27;, &#x27;2017-12-29&#x27;,
               &#x27;2017-12-30&#x27;, &#x27;2017-12-31&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=365, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1df8226f-e290-4ebc-a067-3c5f87ee8a5a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1df8226f-e290-4ebc-a067-3c5f87ee8a5a' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>FileType :</span></dt><dd>GRID_DOTS</dd><dt><span>OriginalName :</span></dt><dd>dt_upd_global_merged_msla_h_20170101_20170101_20190823.nc</dd><dt><span>CreatedBy :</span></dt><dd>ballarm@node036.sis.cnes.fr</dd><dt><span>CreatedOn :</span></dt><dd>23-AUG-2019 11:21:19:000000</dd><dt><span>title :</span></dt><dd>SSALTO/DUACS - DT MSLA - Merged Product - Up-to-date Global Processing</dd><dt><span>history :</span></dt><dd>2019/08/23 11:21:19 ballarm@node036.sis.cnes.fr Import depuis MSLA.nc</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ds_field</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6cc9b9b5665d6e0f6f5af7c06272bf75b04e7ee33eb22f1e824d53173bc4860d.png" src="../../_images/6cc9b9b5665d6e0f6f5af7c06272bf75b04e7ee33eb22f1e824d53173bc4860d.png" />
</div>
</div>
<section id="regridding">
<h3>Regridding<a class="headerlink" href="#regridding" title="Permalink to this headline">#</a></h3>
<p>Now, we will need to regrid our field to the alongtrack data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">oceanbench._src.geoprocessing.gridding</span> <span class="kn">import</span> <span class="n">grid_to_coord_based</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_field</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (lat: 40, lon: 40, time: 365)
Coordinates:
  * lat      (lat) float64 33.12 33.38 33.62 33.88 ... 42.12 42.38 42.62 42.88
  * lon      (lon) float64 -64.88 -64.62 -64.38 -64.12 ... -55.62 -55.38 -55.12
  * time     (time) datetime64[ns] 2017-01-01 2017-01-02 ... 2017-12-31
Data variables:
    ssh      (time, lat, lon) float64 0.817 0.8275 0.8267 ... 0.08649 0.0524
Attributes:
    FileType:      GRID_DOTS
    OriginalName:  dt_upd_global_merged_msla_h_20170101_20170101_20190823.nc
    CreatedBy:     ballarm@node036.sis.cnes.fr
    CreatedOn:     23-AUG-2019 11:21:19:000000
    title:         SSALTO/DUACS - DT MSLA - Merged Product - Up-to-date Globa...
    history:       2019/08/23 11:21:19 ballarm@node036.sis.cnes.fr Import dep...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-9c2e69b6-c6f9-43d5-9463-264519823450' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9c2e69b6-c6f9-43d5-9463-264519823450' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 40</li><li><span class='xr-has-index'>lon</span>: 40</li><li><span class='xr-has-index'>time</span>: 365</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-dcd07547-fad3-4701-8dd4-5b66e7090300' class='xr-section-summary-in' type='checkbox'  checked><label for='section-dcd07547-fad3-4701-8dd4-5b66e7090300' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>33.12 33.38 33.62 ... 42.62 42.88</div><input id='attrs-24ef48d5-2975-4777-be4e-2300f73beb16' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-24ef48d5-2975-4777-be4e-2300f73beb16' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-598de28d-a505-43b0-b71f-2643a8c8984e' class='xr-var-data-in' type='checkbox'><label for='data-598de28d-a505-43b0-b71f-2643a8c8984e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Latitudes</dd></dl></div><div class='xr-var-data'><pre>array([33.125, 33.375, 33.625, 33.875, 34.125, 34.375, 34.625, 34.875, 35.125,
       35.375, 35.625, 35.875, 36.125, 36.375, 36.625, 36.875, 37.125, 37.375,
       37.625, 37.875, 38.125, 38.375, 38.625, 38.875, 39.125, 39.375, 39.625,
       39.875, 40.125, 40.375, 40.625, 40.875, 41.125, 41.375, 41.625, 41.875,
       42.125, 42.375, 42.625, 42.875])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-64.88 -64.62 ... -55.38 -55.12</div><input id='attrs-7864a997-c69e-47ee-9119-35a7805550fb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7864a997-c69e-47ee-9119-35a7805550fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-41bb42cf-8a47-4e07-9bce-2f7565b6ac9e' class='xr-var-data-in' type='checkbox'><label for='data-41bb42cf-8a47-4e07-9bce-2f7565b6ac9e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Longitudes</dd></dl></div><div class='xr-var-data'><pre>array([-64.875, -64.625, -64.375, -64.125, -63.875, -63.625, -63.375, -63.125,
       -62.875, -62.625, -62.375, -62.125, -61.875, -61.625, -61.375, -61.125,
       -60.875, -60.625, -60.375, -60.125, -59.875, -59.625, -59.375, -59.125,
       -58.875, -58.625, -58.375, -58.125, -57.875, -57.625, -57.375, -57.125,
       -56.875, -56.625, -56.375, -56.125, -55.875, -55.625, -55.375, -55.125])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-01-01 ... 2017-12-31</div><input id='attrs-f7b93edb-100b-4cc6-ae8d-8d585a57f9dd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f7b93edb-100b-4cc6-ae8d-8d585a57f9dd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-31d39766-2f7d-4c27-b5dd-0746abe53d15' class='xr-var-data-in' type='checkbox'><label for='data-31d39766-2f7d-4c27-b5dd-0746abe53d15' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-01-01T00:00:00.000000000&#x27;, &#x27;2017-01-02T00:00:00.000000000&#x27;,
       &#x27;2017-01-03T00:00:00.000000000&#x27;, ..., &#x27;2017-12-29T00:00:00.000000000&#x27;,
       &#x27;2017-12-30T00:00:00.000000000&#x27;, &#x27;2017-12-31T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bd9310c4-0ddd-4c79-987e-581370fb28d4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-bd9310c4-0ddd-4c79-987e-581370fb28d4' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.817 0.8275 ... 0.08649 0.0524</div><input id='attrs-6fb7e7f0-9b17-4676-9ab0-9d6592728ab9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6fb7e7f0-9b17-4676-9ab0-9d6592728ab9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e8c43228-50d4-44c8-9e54-911bc0bccc21' class='xr-var-data-in' type='checkbox'><label for='data-e8c43228-50d4-44c8-9e54-911bc0bccc21' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height</dd><dt><span>long_name :</span></dt><dd>Sea Surface Height</dd></dl></div><div class='xr-var-data'><pre>array([[[ 8.17046742e-01,  8.27514862e-01,  8.26669258e-01, ...,
          5.91444416e-01,  5.69390200e-01,  5.67099419e-01],
        [ 8.24618027e-01,  8.36100959e-01,  8.39475020e-01, ...,
          5.51100663e-01,  5.34920521e-01,  5.43047843e-01],
        [ 8.08035086e-01,  8.29207826e-01,  8.46738212e-01, ...,
          5.10334168e-01,  4.96793341e-01,  5.09115076e-01],
        ...,
        [-5.11311590e-02, -5.88482068e-02, -5.99110669e-02, ...,
         -1.35347322e-01, -1.49161244e-01, -1.40957221e-01],
        [-2.36727296e-02, -3.07721458e-02, -3.87165545e-02, ...,
         -1.35030726e-01, -1.50401502e-01, -1.41297371e-01],
        [ 8.61049852e-03, -1.86020048e-04, -1.55262244e-02, ...,
         -1.13480400e-01, -1.45720472e-01, -1.37354081e-01]],

       [[ 8.16025431e-01,  8.22404255e-01,  8.23479069e-01, ...,
          5.78381942e-01,  5.57981515e-01,  5.63903809e-01],
        [ 8.22319568e-01,  8.32893618e-01,  8.37059095e-01, ...,
          5.38289455e-01,  5.28495322e-01,  5.40421735e-01],
        [ 8.14722414e-01,  8.31906844e-01,  8.45802493e-01, ...,
          4.97849245e-01,  4.95709356e-01,  5.10950748e-01],
...
        [-6.02529272e-02, -4.57092718e-02, -4.37417200e-02, ...,
          2.02647038e-01,  1.25605205e-01,  5.02284356e-02],
        [-4.97940219e-02, -3.66180129e-02, -3.30300255e-02, ...,
          1.64880266e-01,  8.96138165e-02,  3.25964274e-02],
        [-3.50247432e-02, -2.83791362e-02, -2.99249483e-02, ...,
          1.51291874e-01,  7.24994229e-02,  4.17794493e-02]],

       [[ 5.20208704e-01,  4.66653963e-01,  4.00358421e-01, ...,
          7.42787176e-01,  7.37612281e-01,  7.14371011e-01],
        [ 5.01854845e-01,  4.37117779e-01,  3.68943303e-01, ...,
          7.44572888e-01,  7.56830424e-01,  7.51449267e-01],
        [ 5.46587657e-01,  4.77981183e-01,  4.22241159e-01, ...,
          7.28263106e-01,  7.63143986e-01,  7.80524185e-01],
        ...,
        [-5.73130399e-02, -4.39545036e-02, -4.44530940e-02, ...,
          2.12240435e-01,  1.25187674e-01,  4.99812104e-02],
        [-4.42866794e-02, -3.25777568e-02, -2.96511574e-02, ...,
          1.81239983e-01,  1.06903306e-01,  4.48399218e-02],
        [-3.17379270e-02, -2.67240941e-02, -2.96163080e-02, ...,
          1.60004344e-01,  8.64877539e-02,  5.24041858e-02]]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7bbc9bf0-7069-41c1-92d5-628f14b251d5' class='xr-section-summary-in' type='checkbox'  ><label for='section-7bbc9bf0-7069-41c1-92d5-628f14b251d5' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-56128dcf-c148-44ae-a36f-4d5e40ab4e83' class='xr-index-data-in' type='checkbox'/><label for='index-56128dcf-c148-44ae-a36f-4d5e40ab4e83' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([33.125, 33.375, 33.625, 33.875, 34.125, 34.375, 34.625, 34.875,
              35.125, 35.375, 35.625, 35.875, 36.125, 36.375, 36.625, 36.875,
              37.125, 37.375, 37.625, 37.875, 38.125, 38.375, 38.625, 38.875,
              39.125, 39.375, 39.625, 39.875, 40.125, 40.375, 40.625, 40.875,
              41.125, 41.375, 41.625, 41.875, 42.125, 42.375, 42.625, 42.875],
             dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-748ed09d-48b4-4a15-a73c-3572f02ec429' class='xr-index-data-in' type='checkbox'/><label for='index-748ed09d-48b4-4a15-a73c-3572f02ec429' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([-64.875, -64.625, -64.375, -64.125, -63.875, -63.625, -63.375,
              -63.125, -62.875, -62.625, -62.375, -62.125, -61.875, -61.625,
              -61.375, -61.125, -60.875, -60.625, -60.375, -60.125, -59.875,
              -59.625, -59.375, -59.125, -58.875, -58.625, -58.375, -58.125,
              -57.875, -57.625, -57.375, -57.125, -56.875, -56.625, -56.375,
              -56.125, -55.875, -55.625, -55.375, -55.125],
             dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3332b47d-2b94-4b51-89f0-c79baf3d9bd9' class='xr-index-data-in' type='checkbox'/><label for='index-3332b47d-2b94-4b51-89f0-c79baf3d9bd9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-01-01&#x27;, &#x27;2017-01-02&#x27;, &#x27;2017-01-03&#x27;, &#x27;2017-01-04&#x27;,
               &#x27;2017-01-05&#x27;, &#x27;2017-01-06&#x27;, &#x27;2017-01-07&#x27;, &#x27;2017-01-08&#x27;,
               &#x27;2017-01-09&#x27;, &#x27;2017-01-10&#x27;,
               ...
               &#x27;2017-12-22&#x27;, &#x27;2017-12-23&#x27;, &#x27;2017-12-24&#x27;, &#x27;2017-12-25&#x27;,
               &#x27;2017-12-26&#x27;, &#x27;2017-12-27&#x27;, &#x27;2017-12-28&#x27;, &#x27;2017-12-29&#x27;,
               &#x27;2017-12-30&#x27;, &#x27;2017-12-31&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=365, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2e4645af-a73d-40e6-9f0e-3a9bf159b1fe' class='xr-section-summary-in' type='checkbox'  checked><label for='section-2e4645af-a73d-40e6-9f0e-3a9bf159b1fe' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>FileType :</span></dt><dd>GRID_DOTS</dd><dt><span>OriginalName :</span></dt><dd>dt_upd_global_merged_msla_h_20170101_20170101_20190823.nc</dd><dt><span>CreatedBy :</span></dt><dd>ballarm@node036.sis.cnes.fr</dd><dt><span>CreatedOn :</span></dt><dd>23-AUG-2019 11:21:19:000000</dd><dt><span>title :</span></dt><dd>SSALTO/DUACS - DT MSLA - Merged Product - Up-to-date Global Processing</dd><dt><span>history :</span></dt><dd>2019/08/23 11:21:19 ballarm@node036.sis.cnes.fr Import depuis MSLA.nc</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_nadir</span><span class="p">[</span><span class="s2">&quot;ssh_interp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_to_coord_based</span><span class="p">(</span>
    <span class="n">ds_field</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">),</span>
    <span class="n">ds_nadir</span><span class="p">,</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ssh&quot;</span><span class="p">],</span> 
<span class="p">)[</span><span class="s2">&quot;ssh&quot;</span><span class="p">]</span>
<span class="c1"># np.isfinite(ds_nadir_gridded.ssh.isel(time=6)).plot.imshow()</span>
<span class="n">ds_results</span> <span class="o">=</span> <span class="n">ds_nadir</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1"># drop all nans</span>
<span class="n">ds_results</span> <span class="o">=</span> <span class="n">ds_results</span><span class="p">[[</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="s2">&quot;ssh_interp&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:     (time: 47191)
Coordinates:
  * time        (time) datetime64[ns] 2017-01-01T08:08:43.899440896 ... 2017-...
    lon         (time) float64 -62.62 -62.63 -62.64 ... -59.19 -59.2 -59.21
    lat         (time) float64 33.15 33.2 33.26 33.32 ... 33.3 33.24 33.18 33.13
Data variables:
    ssh         (time) float32 0.43 0.404 0.364 0.358 ... 0.632 0.612 0.724
    ssh_interp  (time) float64 0.4091 0.4189 0.43 ... 0.7218 0.7214 0.7208
Attributes: (12/44)
    Conventions:                     CF-1.6
    Metadata_Conventions:            Unidata Dataset Discovery v1.0
    cdm_data_type:                   Swath
    comment:                         Sea surface height measured by altimeter...
    contact:                         servicedesk.cmems@mercator-ocean.eu
    creator_email:                   servicedesk.cmems@mercator-ocean.eu
    ...                              ...
    summary:                         SSALTO/DUACS Delayed-Time Level-3 sea su...
    time_coverage_duration:          P23H43M4.754863S
    time_coverage_end:               2016-01-01T23:11:03Z
    time_coverage_resolution:        P1S
    time_coverage_start:             2015-12-31T23:27:58Z
    title:                           DT Cryosat-2 Global Ocean Along track SS...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-e130220c-3b5e-4389-9907-aca1bdeea68b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e130220c-3b5e-4389-9907-aca1bdeea68b' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 47191</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e825fe66-6cbd-4c44-9154-9e3c9b5422b4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e825fe66-6cbd-4c44-9154-9e3c9b5422b4' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-01-01T08:08:43.899440896 .....</div><input id='attrs-510fb122-3c40-402a-a69b-8219a61c49ae' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-510fb122-3c40-402a-a69b-8219a61c49ae' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a10bac26-4f6a-44ee-819f-6d5e50ddc9fd' class='xr-var-data-in' type='checkbox'><label for='data-a10bac26-4f6a-44ee-819f-6d5e50ddc9fd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-01-01T08:08:43.899440896&#x27;, &#x27;2017-01-01T08:08:44.842840832&#x27;,
       &#x27;2017-01-01T08:08:45.786241024&#x27;, ..., &#x27;2017-12-30T02:05:47.333058048&#x27;,
       &#x27;2017-12-30T02:05:48.276457984&#x27;, &#x27;2017-12-30T02:05:49.219857920&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-62.62 -62.63 ... -59.2 -59.21</div><input id='attrs-53803814-a158-4f8c-963c-5b08b8627bda' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-53803814-a158-4f8c-963c-5b08b8627bda' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-193bcd6c-ad48-4934-a895-a8cb48a47406' class='xr-var-data-in' type='checkbox'><label for='data-193bcd6c-ad48-4934-a895-a8cb48a47406' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Longitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([-62.621406, -62.628202, -62.635002, ..., -59.194652, -59.20147 ,
       -59.208284])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>33.15 33.2 33.26 ... 33.18 33.13</div><input id='attrs-3ef3bb93-b34a-4678-b702-f9248ce90a01' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3ef3bb93-b34a-4678-b702-f9248ce90a01' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f072eb15-28e3-4931-865f-74099d71cbb1' class='xr-var-data-in' type='checkbox'><label for='data-f072eb15-28e3-4931-865f-74099d71cbb1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Latitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([33.147072, 33.204212, 33.26135 , ..., 33.241313, 33.184122,
       33.126931])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ca4134eb-9644-4d60-922f-b487c877fd03' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ca4134eb-9644-4d60-922f-b487c877fd03' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.43 0.404 0.364 ... 0.612 0.724</div><input id='attrs-5ab8ef66-b654-4e5d-a25b-cadd616241ac' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5ab8ef66-b654-4e5d-a25b-cadd616241ac' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3dbe6aac-0233-4536-9bd0-bc1dbba9e21a' class='xr-var-data-in' type='checkbox'><label for='data-3dbe6aac-0233-4536-9bd0-bc1dbba9e21a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.43000004, 0.404     , 0.36400005, ..., 0.632     , 0.612     ,
       0.72400004], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssh_interp</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.4091 0.4189 ... 0.7214 0.7208</div><input id='attrs-1a8cba5e-0376-4c0c-a925-3116c8448e0e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1a8cba5e-0376-4c0c-a925-3116c8448e0e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-53766c2a-a69e-424c-b0c1-a3b4696447da' class='xr-var-data-in' type='checkbox'><label for='data-53766c2a-a69e-424c-b0c1-a3b4696447da' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height</dd><dt><span>long_name :</span></dt><dd>Sea Surface Height</dd></dl></div><div class='xr-var-data'><pre>array([0.4090871 , 0.4188988 , 0.43003396, ..., 0.72181525, 0.72135768,
       0.72076952])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0b0a964c-bf0d-4079-be0e-7ec4e34219b7' class='xr-section-summary-in' type='checkbox'  ><label for='section-0b0a964c-bf0d-4079-be0e-7ec4e34219b7' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-b2e86c9c-7aaa-47ef-bd5f-48edd5b9fb55' class='xr-index-data-in' type='checkbox'/><label for='index-b2e86c9c-7aaa-47ef-bd5f-48edd5b9fb55' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-01-01 08:08:43.899440896&#x27;,
               &#x27;2017-01-01 08:08:44.842840832&#x27;,
               &#x27;2017-01-01 08:08:45.786241024&#x27;,
               &#x27;2017-01-01 08:08:46.729640704&#x27;,
               &#x27;2017-01-01 08:08:47.673040896&#x27;,
               &#x27;2017-01-01 08:08:48.616440832&#x27;,
               &#x27;2017-01-01 08:08:49.559841024&#x27;,
               &#x27;2017-01-01 08:08:50.503240960&#x27;,
               &#x27;2017-01-01 08:08:51.446640896&#x27;,
               &#x27;2017-01-01 08:08:52.390040832&#x27;,
               ...
               &#x27;2017-12-30 02:05:40.729257728&#x27;,
               &#x27;2017-12-30 02:05:41.672657920&#x27;,
               &#x27;2017-12-30 02:05:42.616057856&#x27;,
               &#x27;2017-12-30 02:05:43.559458052&#x27;,
               &#x27;2017-12-30 02:05:44.502857728&#x27;,
               &#x27;2017-12-30 02:05:45.446257924&#x27;,
               &#x27;2017-12-30 02:05:46.389657860&#x27;,
               &#x27;2017-12-30 02:05:47.333058048&#x27;,
               &#x27;2017-12-30 02:05:48.276457984&#x27;,
               &#x27;2017-12-30 02:05:49.219857920&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=47191, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6359848d-4538-4913-a539-2e667e671209' class='xr-section-summary-in' type='checkbox'  ><label for='section-6359848d-4538-4913-a539-2e667e671209' class='xr-section-summary' >Attributes: <span>(44)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Metadata_Conventions :</span></dt><dd>Unidata Dataset Discovery v1.0</dd><dt><span>cdm_data_type :</span></dt><dd>Swath</dd><dt><span>comment :</span></dt><dd>Sea surface height measured by altimeters referenced to the [1993, 2012] period; with additional corrections; the proposed sla is already corrected for dac, ocean_tide and lwe; [uncorrected sla]=[sla from product]+[dac]+[ocean_tide]-[lwe]</dd><dt><span>contact :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_email :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_name :</span></dt><dd>CMEMS - Sea Level Thematic Assembly Center</dd><dt><span>creator_url :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>date_created :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_issued :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_modified :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>geospatial_lat_max :</span></dt><dd>82.252703</dd><dt><span>geospatial_lat_min :</span></dt><dd>-69.84683</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>0.05649700000000024</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.997542</dd><dt><span>geospatial_lon_min :</span></dt><dd>0.010983</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>0.006772999999999474</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>geospatial_vertical_max :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_min :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_positive :</span></dt><dd>down</dd><dt><span>geospatial_vertical_resolution :</span></dt><dd>point</dd><dt><span>geospatial_vertical_units :</span></dt><dd>m</dd><dt><span>history :</span></dt><dd>2019-03-28T08:33:58Z: Creation</dd><dt><span>institution :</span></dt><dd>CLS, CNES</dd><dt><span>keywords :</span></dt><dd>Oceans &gt; Ocean Topography &gt; Sea Surface Height</dd><dt><span>keywords_vocabulary :</span></dt><dd>NetCDF COARDS Climate and Forecast Standard Names</dd><dt><span>license :</span></dt><dd>http://marine.copernicus.eu/web/27-service-commitments-and-licence.php</dd><dt><span>platform :</span></dt><dd>Cryosat-2</dd><dt><span>processing_level :</span></dt><dd>L3</dd><dt><span>product_version :</span></dt><dd>2019</dd><dt><span>project :</span></dt><dd>COPERNICUS MARINE ENVIRONMENT MONITORING SERVICE (CMEMS)</dd><dt><span>references :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>software_version :</span></dt><dd>6.2_DUACS_DT2018_baseline</dd><dt><span>source :</span></dt><dd>Cryosat-2 measurements</dd><dt><span>ssalto_duacs_comment :</span></dt><dd>The reference mission used for the altimeter inter-calibration processing is Topex/Poseidon between 1993-01-01 and 2002-04-23, Jason-1 between 2002-04-24 and 2008-10-18, OSTM/Jason-2 between 2008-10-19 and 2016-06-25, Jason-3 since 2016-06-25.</dd><dt><span>standard_name_vocabulary :</span></dt><dd>NetCDF Climate and Forecast (CF) Metadata Convention Standard Name Table v37</dd><dt><span>summary :</span></dt><dd>SSALTO/DUACS Delayed-Time Level-3 sea surface height measured by Cryosat-2 altimetry observations over Global Ocean.</dd><dt><span>time_coverage_duration :</span></dt><dd>P23H43M4.754863S</dd><dt><span>time_coverage_end :</span></dt><dd>2016-01-01T23:11:03Z</dd><dt><span>time_coverage_resolution :</span></dt><dd>P1S</dd><dt><span>time_coverage_start :</span></dt><dd>2015-12-31T23:27:58Z</dd><dt><span>title :</span></dt><dd>DT Cryosat-2 Global Ocean Along track SSALTO/DUACS Sea Surface Height L3 product</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>We should reduce the area slightly to ensure that the boundaries are not included. It makes the comparison more faire.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_results</span> <span class="o">=</span> <span class="n">where_slice</span><span class="p">(</span><span class="n">ds_results</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">64.975</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.007</span> <span class="o">-</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="n">ds_results</span> <span class="o">=</span> <span class="n">where_slice</span><span class="p">(</span><span class="n">ds_results</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mf">33.025</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">42.9917</span> <span class="o">-</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="n">ds_results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:     (time: 44546)
Coordinates:
  * time        (time) datetime64[ns] 2017-01-01T08:08:46.729640704 ... 2017-...
    lon         (time) float64 -62.64 -62.65 -62.66 ... -59.17 -59.18 -59.19
    lat         (time) float64 33.32 33.38 33.43 33.49 ... 33.41 33.36 33.3
Data variables:
    ssh         (time) float32 0.358 0.382 0.457 0.463 ... 0.66 0.655 0.658
    ssh_interp  (time) float64 0.4415 0.4534 0.4847 ... 0.7216 0.7223 0.7221
Attributes: (12/44)
    Conventions:                     CF-1.6
    Metadata_Conventions:            Unidata Dataset Discovery v1.0
    cdm_data_type:                   Swath
    comment:                         Sea surface height measured by altimeter...
    contact:                         servicedesk.cmems@mercator-ocean.eu
    creator_email:                   servicedesk.cmems@mercator-ocean.eu
    ...                              ...
    summary:                         SSALTO/DUACS Delayed-Time Level-3 sea su...
    time_coverage_duration:          P23H43M4.754863S
    time_coverage_end:               2016-01-01T23:11:03Z
    time_coverage_resolution:        P1S
    time_coverage_start:             2015-12-31T23:27:58Z
    title:                           DT Cryosat-2 Global Ocean Along track SS...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-4e964392-1a56-4059-9d77-c0733272316a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4e964392-1a56-4059-9d77-c0733272316a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 44546</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-5187b0ad-f589-49b0-b4e2-835f17f34b72' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5187b0ad-f589-49b0-b4e2-835f17f34b72' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2017-01-01T08:08:46.729640704 .....</div><input id='attrs-29fe94f6-3aa7-461d-a6c4-57936d737282' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-29fe94f6-3aa7-461d-a6c4-57936d737282' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-75f22101-44fe-4694-be23-5d288cf141c2' class='xr-var-data-in' type='checkbox'><label for='data-75f22101-44fe-4694-be23-5d288cf141c2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2017-01-01T08:08:46.729640704&#x27;, &#x27;2017-01-01T08:08:47.673040896&#x27;,
       &#x27;2017-01-01T08:08:48.616440832&#x27;, ..., &#x27;2017-12-30T02:05:44.502857728&#x27;,
       &#x27;2017-12-30T02:05:45.446257924&#x27;, &#x27;2017-12-30T02:05:46.389657860&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-62.64 -62.65 ... -59.18 -59.19</div><input id='attrs-1c423399-bfda-484b-9f81-60953a70e1b5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1c423399-bfda-484b-9f81-60953a70e1b5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7c09ec19-70b4-44e9-ab22-1e8211a4178f' class='xr-var-data-in' type='checkbox'><label for='data-7c09ec19-70b4-44e9-ab22-1e8211a4178f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Longitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([-62.641806, -62.648613, -62.655424, ..., -59.174175, -59.181005,
       -59.18783 ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>33.32 33.38 33.43 ... 33.36 33.3</div><input id='attrs-632e9970-7063-4f96-b027-c3e88d261e0c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-632e9970-7063-4f96-b027-c3e88d261e0c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6af59adf-317b-4aa3-bd20-95da43a529a6' class='xr-var-data-in' type='checkbox'><label for='data-6af59adf-317b-4aa3-bd20-95da43a529a6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Latitude of measurement</dd></dl></div><div class='xr-var-data'><pre>array([33.318488, 33.375625, 33.432762, ..., 33.412882, 33.355693,
       33.298503])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f42c4e92-dd4d-449e-b646-8fbab056cfff' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f42c4e92-dd4d-449e-b646-8fbab056cfff' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.358 0.382 0.457 ... 0.655 0.658</div><input id='attrs-c8f5b0a7-237e-4804-bbe0-5d663b02b84f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c8f5b0a7-237e-4804-bbe0-5d663b02b84f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0cd1f623-8144-483b-8077-d673b69ef502' class='xr-var-data-in' type='checkbox'><label for='data-0cd1f623-8144-483b-8077-d673b69ef502' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.358     , 0.382     , 0.45700002, ..., 0.65999997, 0.65500003,
       0.658     ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssh_interp</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.4415 0.4534 ... 0.7223 0.7221</div><input id='attrs-b50f759f-e1e0-4d4a-87f7-5af0e01e7b85' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b50f759f-e1e0-4d4a-87f7-5af0e01e7b85' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0bc921ab-c494-4c1b-8541-afea1d25728b' class='xr-var-data-in' type='checkbox'><label for='data-0bc921ab-c494-4c1b-8541-afea1d25728b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>sea_surface_height</dd><dt><span>long_name :</span></dt><dd>Sea Surface Height</dd></dl></div><div class='xr-var-data'><pre>array([0.44146464, 0.45340334, 0.48474224, ..., 0.72155998, 0.72233819,
       0.72214212])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1350a835-6939-4306-9563-22b070492f0f' class='xr-section-summary-in' type='checkbox'  ><label for='section-1350a835-6939-4306-9563-22b070492f0f' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3d685eed-e1e9-43af-914a-72fc5649f417' class='xr-index-data-in' type='checkbox'/><label for='index-3d685eed-e1e9-43af-914a-72fc5649f417' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2017-01-01 08:08:46.729640704&#x27;,
               &#x27;2017-01-01 08:08:47.673040896&#x27;,
               &#x27;2017-01-01 08:08:48.616440832&#x27;,
               &#x27;2017-01-01 08:08:49.559841024&#x27;,
               &#x27;2017-01-01 08:08:50.503240960&#x27;,
               &#x27;2017-01-01 08:08:51.446640896&#x27;,
               &#x27;2017-01-01 08:08:52.390040832&#x27;,
               &#x27;2017-01-01 08:08:53.333441024&#x27;,
               &#x27;2017-01-01 08:08:54.276840960&#x27;,
               &#x27;2017-01-01 08:08:55.220240640&#x27;,
               ...
               &#x27;2017-12-30 02:05:37.899057920&#x27;,
               &#x27;2017-12-30 02:05:38.842457856&#x27;,
               &#x27;2017-12-30 02:05:39.785858048&#x27;,
               &#x27;2017-12-30 02:05:40.729257728&#x27;,
               &#x27;2017-12-30 02:05:41.672657920&#x27;,
               &#x27;2017-12-30 02:05:42.616057856&#x27;,
               &#x27;2017-12-30 02:05:43.559458052&#x27;,
               &#x27;2017-12-30 02:05:44.502857728&#x27;,
               &#x27;2017-12-30 02:05:45.446257924&#x27;,
               &#x27;2017-12-30 02:05:46.389657860&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=44546, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-594ccbe9-e114-4336-a449-06ab536e7f40' class='xr-section-summary-in' type='checkbox'  ><label for='section-594ccbe9-e114-4336-a449-06ab536e7f40' class='xr-section-summary' >Attributes: <span>(44)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Metadata_Conventions :</span></dt><dd>Unidata Dataset Discovery v1.0</dd><dt><span>cdm_data_type :</span></dt><dd>Swath</dd><dt><span>comment :</span></dt><dd>Sea surface height measured by altimeters referenced to the [1993, 2012] period; with additional corrections; the proposed sla is already corrected for dac, ocean_tide and lwe; [uncorrected sla]=[sla from product]+[dac]+[ocean_tide]-[lwe]</dd><dt><span>contact :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_email :</span></dt><dd>servicedesk.cmems@mercator-ocean.eu</dd><dt><span>creator_name :</span></dt><dd>CMEMS - Sea Level Thematic Assembly Center</dd><dt><span>creator_url :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>date_created :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_issued :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>date_modified :</span></dt><dd>2019-03-28T08:33:58Z</dd><dt><span>geospatial_lat_max :</span></dt><dd>82.252703</dd><dt><span>geospatial_lat_min :</span></dt><dd>-69.84683</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>0.05649700000000024</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.997542</dd><dt><span>geospatial_lon_min :</span></dt><dd>0.010983</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>0.006772999999999474</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>geospatial_vertical_max :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_min :</span></dt><dd>0.0</dd><dt><span>geospatial_vertical_positive :</span></dt><dd>down</dd><dt><span>geospatial_vertical_resolution :</span></dt><dd>point</dd><dt><span>geospatial_vertical_units :</span></dt><dd>m</dd><dt><span>history :</span></dt><dd>2019-03-28T08:33:58Z: Creation</dd><dt><span>institution :</span></dt><dd>CLS, CNES</dd><dt><span>keywords :</span></dt><dd>Oceans &gt; Ocean Topography &gt; Sea Surface Height</dd><dt><span>keywords_vocabulary :</span></dt><dd>NetCDF COARDS Climate and Forecast Standard Names</dd><dt><span>license :</span></dt><dd>http://marine.copernicus.eu/web/27-service-commitments-and-licence.php</dd><dt><span>platform :</span></dt><dd>Cryosat-2</dd><dt><span>processing_level :</span></dt><dd>L3</dd><dt><span>product_version :</span></dt><dd>2019</dd><dt><span>project :</span></dt><dd>COPERNICUS MARINE ENVIRONMENT MONITORING SERVICE (CMEMS)</dd><dt><span>references :</span></dt><dd>http://marine.copernicus.eu</dd><dt><span>software_version :</span></dt><dd>6.2_DUACS_DT2018_baseline</dd><dt><span>source :</span></dt><dd>Cryosat-2 measurements</dd><dt><span>ssalto_duacs_comment :</span></dt><dd>The reference mission used for the altimeter inter-calibration processing is Topex/Poseidon between 1993-01-01 and 2002-04-23, Jason-1 between 2002-04-24 and 2008-10-18, OSTM/Jason-2 between 2008-10-19 and 2016-06-25, Jason-3 since 2016-06-25.</dd><dt><span>standard_name_vocabulary :</span></dt><dd>NetCDF Climate and Forecast (CF) Metadata Convention Standard Name Table v37</dd><dt><span>summary :</span></dt><dd>SSALTO/DUACS Delayed-Time Level-3 sea surface height measured by Cryosat-2 altimetry observations over Global Ocean.</dd><dt><span>time_coverage_duration :</span></dt><dd>P23H43M4.754863S</dd><dt><span>time_coverage_end :</span></dt><dd>2016-01-01T23:11:03Z</dd><dt><span>time_coverage_resolution :</span></dt><dd>P1S</dd><dt><span>time_coverage_start :</span></dt><dd>2015-12-31T23:27:58Z</dd><dt><span>title :</span></dt><dd>DT Cryosat-2 Global Ocean Along track SSALTO/DUACS Sea Surface Height L3 product</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>


<span class="c1"># True SSH</span>
<span class="n">sub_ds_ssh</span> <span class="o">=</span> <span class="n">ds_results</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2017-01-01&quot;</span><span class="p">,</span><span class="s2">&quot;2017-01-15&quot;</span><span class="p">))</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">sub_ds_ssh</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">sub_ds_ssh</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">sub_ds_ssh</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">65.</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.</span><span class="p">],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mf">33.</span><span class="p">,</span> <span class="mf">43.</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sea Surface Height [m]&quot;</span><span class="p">)</span>

<span class="c1"># Predicted SSH</span>
<span class="n">sub_ds_ssh_interp</span> <span class="o">=</span> <span class="n">ds_results</span><span class="o">.</span><span class="n">ssh_interp</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2017-01-01&quot;</span><span class="p">,</span><span class="s2">&quot;2017-01-15&quot;</span><span class="p">))</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">sub_ds_ssh_interp</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">sub_ds_ssh_interp</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">sub_ds_ssh_interp</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">65.</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sea Surface Height [m]&quot;</span><span class="p">)</span>


<span class="c1"># Predicted SSH</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">sub_ds_ssh_interp</span> <span class="o">-</span> <span class="n">sub_ds_ssh</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">diff</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">diff</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;Reds&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">65.</span><span class="p">,</span> <span class="o">-</span><span class="mf">55.</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Difference [m]&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/f1e9d91fa05079bda84633694fe3b6308f4aa82bb9d06260e2abbc7d2720123d.png" src="../../_images/f1e9d91fa05079bda84633694fe3b6308f4aa82bb9d06260e2abbc7d2720123d.png" />
</div>
</div>
</section>
</section>
<section id="alongtrack-segments">
<h2>AlongTrack Segments<a class="headerlink" href="#alongtrack-segments" title="Permalink to this headline">#</a></h2>
<p><strong>TODO</strong>: Need to explain this better.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">velocity</span> <span class="o">=</span> <span class="mf">6.77</span> <span class="c1"># [km/s]</span>
<span class="n">delta_t</span> <span class="o">=</span> <span class="mf">0.9434</span> <span class="c1"># [s]</span>
<span class="n">delta_x</span> <span class="o">=</span> <span class="n">velocity</span> <span class="o">*</span> <span class="n">delta_t</span> <span class="c1"># [km]</span>
<span class="n">length_scale</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1"># [km]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">oceanbench._src.preprocessing.alongtrack</span> <span class="k">as</span> <span class="nn">atrack_process</span>
<span class="kn">import</span> <span class="nn">oceanbench._src.metrics.power_spectrum</span> <span class="k">as</span> <span class="nn">psd_calc</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_segments</span> <span class="o">=</span> <span class="n">atrack_process</span><span class="o">.</span><span class="n">select_track_segments</span><span class="p">(</span>
    <span class="n">ds_results</span><span class="p">,</span>
    <span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="s2">&quot;ssh_interp&quot;</span><span class="p">,</span>
    <span class="n">velocity</span><span class="o">=</span><span class="mf">6.77</span><span class="p">,</span>
    <span class="n">delta_t</span><span class="o">=</span><span class="mf">0.9434</span><span class="p">,</span>
    <span class="n">length_scale</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">segment_overlapping</span><span class="o">=</span><span class="mf">0.25</span>
<span class="p">)</span>
<span class="n">ds_segments</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:     (segment: 214, track_val: 156)
Coordinates:
  * segment     (segment) int64 0 1 2 3 4 5 6 7 ... 207 208 209 210 211 212 213
    lat         (segment) float64 -63.19 -61.24 -64.05 ... -56.85 -57.69 -60.55
    lon         (segment) float64 37.8 38.31 37.66 38.31 ... 38.16 38.29 37.71
  * track_val   (track_val) int64 0 1 2 3 4 5 6 ... 149 150 151 152 153 154 155
Data variables:
    ssh_interp  (segment, track_val) float64 0.4415 0.4534 ... 0.01457 0.01301
    ssh         (segment, track_val) float32 0.358 0.382 0.457 ... -0.007 0.018
Attributes:
    delta_x:       6.386818
    velocity:      6.77
    length_scale:  1000
    nperseg:       156</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-f3934a05-d851-4ca7-8e7f-e69efa6aa40f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f3934a05-d851-4ca7-8e7f-e69efa6aa40f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>segment</span>: 214</li><li><span class='xr-has-index'>track_val</span>: 156</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-ad045c7e-94d8-4693-a16e-4238270c373f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ad045c7e-94d8-4693-a16e-4238270c373f' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>segment</span></div><div class='xr-var-dims'>(segment)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 ... 209 210 211 212 213</div><input id='attrs-209981f7-6280-4722-8a17-8501891ee09b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-209981f7-6280-4722-8a17-8501891ee09b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1186e519-90d6-4547-b130-1893fc79f8ca' class='xr-var-data-in' type='checkbox'><label for='data-1186e519-90d6-4547-b130-1893fc79f8ca' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  0,   1,   2, ..., 211, 212, 213])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(segment)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-63.19 -61.24 ... -57.69 -60.55</div><input id='attrs-b4e99cba-bd48-4bf0-8b39-15307effb2c6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b4e99cba-bd48-4bf0-8b39-15307effb2c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0b498a6d-45d7-45b4-a064-2bb05aaff91e' class='xr-var-data-in' type='checkbox'><label for='data-0b498a6d-45d7-45b4-a064-2bb05aaff91e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-63.1886515, -61.2383445, -64.0476625, -62.1121355, -62.9864325,
       -63.853717 , -56.4369095, -57.3175025, -58.19074  , -56.237606 ,
       -59.0639635, -57.1118915, -59.9374145, -58.014863 , -60.818386 ,
       -58.8888075, -61.6926105, -59.748043 , -62.567077 , -63.462944 ,
       -61.480744 , -62.3655915, -63.2291185, -64.0959575, -55.817635 ,
       -56.696333 , -57.6033655, -56.5144435, -59.323903 , -57.3851775,
       -60.2023355, -58.262903 , -61.0739725, -59.1259295, -61.9530475,
       -60.0030795, -62.825022 , -60.8803045, -63.703815 , -61.7507675,
       -63.499861 , -56.0900245, -57.8393265, -55.901488 , -58.716731 ,
       -56.7790425, -59.5937335, -57.6563565, -60.4710375, -58.533529 ,
       -61.348698 , -59.403349 , -62.226578 , -60.29478  , -63.1043245,
       -61.1578455, -63.974457 , -62.043164 , -62.9144985, -63.7856635,
       -56.369419 , -57.2469125, -58.124249 , -56.177598 , -59.0088385,
       -57.0570075, -59.8723855, -57.929235 , -60.7578665, -58.801355 ,
       -61.6295445, -59.6806475, -60.5530075, -61.425986 , -62.32831  ,
       -63.1875575, -64.046364 , -55.792    , -56.6359465, -57.5154835,
       -58.387919 , -56.450214 , -59.260673 , -57.3097755, -60.169712 ,
       -58.205107 , -61.0363985, -59.0571505, -61.9249715, -59.937938 ,
       -62.763453 , -63.6373495, -61.7365065, -63.431799 , -57.790611 ,
       -55.851353 , -58.645622 , -56.7028975, -59.515303 , -60.396196 ,
...
       -61.54707  , -59.673257 , -62.424498 , -63.3014575, -61.385877 ,
       -62.253475 , -63.1567135, -64.009382 , -56.567581 , -58.321835 ,
       -56.3846675, -59.195934 , -57.2597455, -60.070643 , -58.1346645,
       -60.952963 , -59.0597345, -59.906201 , -62.7031325, -60.803237 ,
       -63.5775745, -61.6288845, -62.5046485, -63.365594 , -55.964397 ,
       -58.601644 , -56.644338 , -59.4671725, -57.516135 , -60.3475675,
       -58.409265 , -61.2353815, -62.1015235, -60.174406 , -62.995701 ,
       -61.0179665, -63.8609255, -61.8974595, -62.8267755, -63.6408575,
       -56.2352795, -56.0337625, -58.8591835, -59.732195 , -57.7833375,
       -60.612282 , -58.6602945, -61.482306 , -59.535515 , -62.380269 ,
       -60.411163 , -61.29425  , -64.110532 , -62.1700405, -63.0455125,
       -63.9134995, -56.5132375, -57.3884265, -58.263831 , -56.3191295,
       -59.1397175, -57.194884 , -60.0375875, -58.063321 , -60.892675 ,
       -58.9391045, -61.768757 , -59.8297625, -62.6441265, -60.692068 ,
       -63.5193205, -61.568939 , -62.43843  , -63.322082 , -55.906936 ,
       -56.782318 , -57.6578755, -58.533952 , -56.57514  , -59.4107115,
       -57.437636 , -60.280743 , -58.3139635, -59.1893305, -62.05976  ,
       -60.0651695, -62.905532 , -63.780331 , -61.824538 , -62.67866  ,
       -63.561397 , -56.1875255, -57.0405435, -57.914945 , -55.95859  ,
       -58.789996 , -56.847521 , -57.693111 , -60.5487465])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(segment)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.8 38.31 37.66 ... 38.29 37.71</div><input id='attrs-b129042f-808b-40be-b989-93453b0a2325' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b129042f-808b-40be-b989-93453b0a2325' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-526de065-a0a4-4486-b345-81197160d36d' class='xr-var-data-in' type='checkbox'><label for='data-526de065-a0a4-4486-b345-81197160d36d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([37.8020155, 38.305264 , 37.662337 , 38.3143525, 38.265559 ,
       38.273415 , 37.7153945, 37.7511025, 37.675535 , 38.3590215,
       37.66139  , 38.362096 , 37.652007 , 38.133145 , 37.7042975,
       38.130716 , 37.702964 , 38.241337 , 37.704177 , 37.8785945,
       38.347607 , 38.287571 , 38.2857265, 38.2852605, 37.735391 ,
       37.746558 , 37.9305285, 38.184033 , 37.6760385, 38.237531 ,
       37.696712 , 38.260202 , 37.662792 , 38.3382445, 37.6878105,
       38.329558 , 37.6563165, 38.3204895, 37.6817675, 38.3687865,
       38.293905 , 37.733521 , 37.655319 , 38.322121 , 37.666384 ,
       38.32249  , 37.670225 , 38.3240945, 37.6759855, 38.3221055,
       37.6833195, 38.373873 , 37.691538 , 38.2517295, 37.6995155,
       38.3563995, 37.650202 , 38.2876885, 38.2741875, 38.259244 ,
       37.7259625, 37.7313675, 37.682103 , 38.3446825, 37.750449 ,
       38.3169965, 37.6515635, 38.342088 , 37.727729 , 38.3633325,
       37.6930565, 38.324024 , 38.339313 , 38.35245  , 38.135163 ,
       38.2033055, 38.2715505, 37.9639145, 37.7120905, 37.6915245,
       37.674619 , 38.2142545, 37.6619705, 38.337551 , 37.939699 ,
       38.1725475, 37.8779385, 38.349281 , 37.9907945, 38.2963285,
       37.70517  , 37.7073565, 37.9042535, 38.200622 , 37.8712335,
       38.1258165, 37.7067815, 38.3340665, 37.6594545, 37.700467 ,
...
       37.677963 , 37.903594 , 37.680927 , 37.685331 , 38.2222695,
       38.2918685, 38.016505 , 38.1406795, 37.7150765, 37.67571  ,
       38.334682 , 37.6624665, 38.3307675, 37.65372  , 38.323018 ,
       37.7059685, 37.91146  , 38.1274535, 37.705404 , 37.940875 ,
       37.7091515, 38.3255265, 38.3084355, 38.2913505, 37.7554995,
       37.7487785, 38.3173015, 37.659606 , 38.3532085, 37.6891745,
       38.215373 , 37.7797525, 37.7025135, 38.105059 , 37.8565515,
       38.362638 , 37.783404 , 38.3340025, 37.848585 , 38.278851 ,
       37.757328 , 38.3392385, 37.7072875, 37.6959845, 38.336678 ,
       37.736251 , 38.3240485, 37.671904 , 38.3438365, 37.837178 ,
       38.3614805, 38.320041 , 37.654669 , 38.3338355, 38.2896215,
       38.3028545, 37.7527545, 37.7402865, 37.673194 , 38.316978 ,
       37.665899 , 38.3163315, 37.8323925, 38.3689015, 37.6584385,
       38.360783 , 37.6576705, 38.292167 , 37.6588125, 38.3347535,
       37.662286 , 38.3167715, 38.354123 , 38.1623445, 37.724894 ,
       37.7305005, 37.6824735, 37.695775 , 38.260906 , 37.713372 ,
       38.343842 , 37.6762475, 38.319339 , 38.314245 , 37.896328 ,
       38.307398 , 37.668444 , 37.672224 , 38.2318345, 38.2802405,
       38.216154 , 37.797934 , 37.736509 , 37.6687245, 38.2547645,
       37.661391 , 38.1569955, 38.286453 , 37.7127745])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>track_val</span></div><div class='xr-var-dims'>(track_val)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 ... 151 152 153 154 155</div><input id='attrs-08fcb5b1-032b-4253-b457-6b46eacbf3cb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-08fcb5b1-032b-4253-b457-6b46eacbf3cb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9e3a66ea-e4b0-4f9f-97a6-b362ecf78385' class='xr-var-data-in' type='checkbox'><label for='data-9e3a66ea-e4b0-4f9f-97a6-b362ecf78385' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,
        14,  15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,
        28,  29,  30,  31,  32,  33,  34,  35,  36,  37,  38,  39,  40,  41,
        42,  43,  44,  45,  46,  47,  48,  49,  50,  51,  52,  53,  54,  55,
        56,  57,  58,  59,  60,  61,  62,  63,  64,  65,  66,  67,  68,  69,
        70,  71,  72,  73,  74,  75,  76,  77,  78,  79,  80,  81,  82,  83,
        84,  85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95,  96,  97,
        98,  99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111,
       112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125,
       126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139,
       140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153,
       154, 155])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a605cea2-98e3-424f-9298-5832c42eb416' class='xr-section-summary-in' type='checkbox'  checked><label for='section-a605cea2-98e3-424f-9298-5832c42eb416' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ssh_interp</span></div><div class='xr-var-dims'>(segment, track_val)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.4415 0.4534 ... 0.01457 0.01301</div><input id='attrs-41da69a2-54cb-47bd-aea8-ea32fa541c99' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-41da69a2-54cb-47bd-aea8-ea32fa541c99' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9ecab9a3-3e1d-45a5-9fcb-64ef0a1dcef1' class='xr-var-data-in' type='checkbox'><label for='data-9ecab9a3-3e1d-45a5-9fcb-64ef0a1dcef1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.44146464,  0.45340334,  0.48474224, ..., -0.11578393,
        -0.1102622 , -0.10574237],
       [-0.06841663, -0.04470662, -0.04528069, ...,  0.75259759,
         0.74930529,  0.74053709],
       [ 0.68955415,  0.69499665,  0.71250659, ..., -0.12329314,
        -0.11507698, -0.10698238],
       ...,
       [-0.06217742,  0.10207082,  0.10430206, ...,  0.6309262 ,
         0.64734007,  0.66369912],
       [ 0.73022565,  0.06557095,  0.06208651, ...,  0.77407818,
         0.76856994,  0.7628454 ],
       [ 0.75914132,  0.65053632,  0.64971751, ...,  0.01505445,
         0.01457114,  0.01300505]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssh</span></div><div class='xr-var-dims'>(segment, track_val)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.358 0.382 0.457 ... -0.007 0.018</div><input id='attrs-2c596fc2-051c-4030-b6a6-29b821bb53b5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2c596fc2-051c-4030-b6a6-29b821bb53b5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-394b770c-c15e-4895-9cfc-71d3c46a21a5' class='xr-var-data-in' type='checkbox'><label for='data-394b770c-c15e-4895-9cfc-71d3c46a21a5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.358     ,  0.382     ,  0.45700002, ..., -0.11300001,
        -0.11400001, -0.13300002],
       [-0.057     , -0.028     , -0.04600001, ...,  0.78200006,
         0.74300003,  0.7110001 ],
       [ 0.684     ,  0.66300005,  0.67300004, ..., -0.10800001,
        -0.097     , -0.088     ],
       ...,
       [-0.105     , -0.015     , -0.06900001, ...,  0.643     ,
         0.65599996,  0.65400004],
       [ 0.692     ,  0.07200001,  0.17500001, ...,  0.75      ,
         0.783     ,  0.717     ],
       [ 0.76900005,  0.643     ,  0.60400003, ..., -0.00899999,
        -0.00700001,  0.018     ]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-904621ee-3cea-41c0-8e5e-a431e79efdf4' class='xr-section-summary-in' type='checkbox'  ><label for='section-904621ee-3cea-41c0-8e5e-a431e79efdf4' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>segment</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-b00ebaa1-0917-4c84-8fd0-74b323d6b345' class='xr-index-data-in' type='checkbox'/><label for='index-b00ebaa1-0917-4c84-8fd0-74b323d6b345' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Int64Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
            ...
            204, 205, 206, 207, 208, 209, 210, 211, 212, 213],
           dtype=&#x27;int64&#x27;, name=&#x27;segment&#x27;, length=214))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>track_val</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-07989be7-1b43-48a8-bdcc-4b87891acf97' class='xr-index-data-in' type='checkbox'/><label for='index-07989be7-1b43-48a8-bdcc-4b87891acf97' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Int64Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
            ...
            146, 147, 148, 149, 150, 151, 152, 153, 154, 155],
           dtype=&#x27;int64&#x27;, name=&#x27;track_val&#x27;, length=156))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ff28457b-bca7-411c-aef3-316f9f59ded4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ff28457b-bca7-411c-aef3-316f9f59ded4' class='xr-section-summary' >Attributes: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>delta_x :</span></dt><dd>6.386818</dd><dt><span>velocity :</span></dt><dd>6.77</dd><dt><span>length_scale :</span></dt><dd>1000</dd><dt><span>nperseg :</span></dt><dd>156</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nperseg</span> <span class="o">=</span> <span class="n">ds_segments</span><span class="o">.</span><span class="n">nperseg</span>
<span class="n">nperseg</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>156
</pre></div>
</div>
</div>
</div>
</section>
<section id="real-statistics">
<h2>Real Statistics<a class="headerlink" href="#real-statistics" title="Permalink to this headline">#</a></h2>
</section>
<section id="statistics">
<h2>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># psd_calc.psd_welch_score(ds_segments, &quot;ssh&quot;, &quot;ssh_interp&quot;, delta_x=delta_x, nperseg=nperseg).score</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="spectral-statistics">
<h2>Spectral Statistics<a class="headerlink" href="#spectral-statistics" title="Permalink to this headline">#</a></h2>
<section id="power-spectrum">
<h3>Power Spectrum<a class="headerlink" href="#power-spectrum" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># SSH AlongTrack</span>
<span class="n">ds_psd</span> <span class="o">=</span> <span class="n">psd_calc</span><span class="o">.</span><span class="n">psd_welch</span><span class="p">(</span><span class="n">ds_segments</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="n">delta_x</span><span class="o">=</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">nperseg</span><span class="o">=</span><span class="n">nperseg</span><span class="p">)</span><span class="o">.</span><span class="n">ssh</span>



<span class="c1"># SSH Interpolated Map</span>
<span class="n">ds_psd_interp</span> <span class="o">=</span> <span class="n">psd_calc</span><span class="o">.</span><span class="n">psd_welch</span><span class="p">(</span><span class="n">ds_segments</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;ssh_interp&quot;</span><span class="p">,</span> <span class="n">delta_x</span><span class="o">=</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">nperseg</span><span class="o">=</span><span class="n">nperseg</span><span class="p">)</span><span class="o">.</span><span class="n">ssh_interp</span>


<span class="c1"># PSD Error</span>
<span class="n">ds_psd_error</span> <span class="o">=</span> <span class="n">psd_calc</span><span class="o">.</span><span class="n">psd_welch_error</span><span class="p">(</span><span class="n">ds_segments</span><span class="p">,</span> <span class="n">variable_ref</span><span class="o">=</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;ssh_interp&quot;</span><span class="p">,</span> <span class="n">delta_x</span><span class="o">=</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">nperseg</span><span class="o">=</span><span class="n">nperseg</span><span class="p">)</span><span class="o">.</span><span class="n">error</span>

<span class="c1"># PSD Score</span>
<span class="n">ds_psd_score</span> <span class="o">=</span> <span class="n">psd_calc</span><span class="o">.</span><span class="n">psd_welch_score</span><span class="p">(</span><span class="n">ds_segments</span><span class="p">,</span> <span class="n">variable_ref</span><span class="o">=</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;ssh_interp&quot;</span><span class="p">,</span> <span class="n">delta_x</span><span class="o">=</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">nperseg</span><span class="o">=</span><span class="n">nperseg</span><span class="p">)</span><span class="o">.</span><span class="n">score</span>

<span class="n">ds_psd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;ssh&#x27; (wavenumber: 79)&gt;
array([1.02373037e+01, 7.14277725e+01, 4.22874489e+01, 2.21006603e+01,
       8.25816345e+00, 2.71950841e+00, 1.40674925e+00, 6.88535631e-01,
       3.68134439e-01, 2.17998356e-01, 1.30187139e-01, 8.60557631e-02,
       6.66696206e-02, 5.22705801e-02, 4.14400324e-02, 3.09867822e-02,
       2.78125107e-02, 2.32093651e-02, 2.11372841e-02, 1.81758646e-02,
       1.80478077e-02, 1.65228639e-02, 1.55075006e-02, 1.27541861e-02,
       1.12466970e-02, 1.24145634e-02, 1.20474407e-02, 1.09734135e-02,
       1.00068841e-02, 1.06369033e-02, 1.12501457e-02, 1.16684642e-02,
       9.71117616e-03, 9.58298892e-03, 9.61237121e-03, 9.55455657e-03,
       9.76762362e-03, 1.02562634e-02, 9.34584532e-03, 8.92794598e-03,
       9.51405521e-03, 9.44814924e-03, 9.20096785e-03, 9.09277238e-03,
       8.38163868e-03, 8.41708854e-03, 8.41432996e-03, 7.14715524e-03,
       7.98082165e-03, 8.83140601e-03, 7.99081381e-03, 8.02045316e-03,
       7.78246671e-03, 8.94837547e-03, 8.09417851e-03, 8.00068583e-03,
       7.34653696e-03, 8.02976545e-03, 7.93727767e-03, 7.48019805e-03,
       7.49919470e-03, 7.87938386e-03, 7.77373137e-03, 7.88705889e-03,
       8.31951480e-03, 7.64988083e-03, 7.48078013e-03, 7.67526543e-03,
       8.13236553e-03, 7.90031720e-03, 6.98836194e-03, 7.61722075e-03,
       7.75263691e-03, 7.75971264e-03, 7.80881057e-03, 7.37115275e-03,
       7.29903765e-03, 7.00414460e-03, 3.10720433e-03], dtype=float32)
Coordinates:
  * wavenumber  (wavenumber) float64 0.0 0.001004 0.002007 ... 0.07728 0.07829</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'ssh'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>wavenumber</span>: 79</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-436e39a4-7f13-4a63-9982-e2ade3d02d86' class='xr-array-in' type='checkbox' checked><label for='section-436e39a4-7f13-4a63-9982-e2ade3d02d86' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>10.24 71.43 42.29 22.1 8.258 ... 0.007371 0.007299 0.007004 0.003107</span></div><div class='xr-array-data'><pre>array([1.02373037e+01, 7.14277725e+01, 4.22874489e+01, 2.21006603e+01,
       8.25816345e+00, 2.71950841e+00, 1.40674925e+00, 6.88535631e-01,
       3.68134439e-01, 2.17998356e-01, 1.30187139e-01, 8.60557631e-02,
       6.66696206e-02, 5.22705801e-02, 4.14400324e-02, 3.09867822e-02,
       2.78125107e-02, 2.32093651e-02, 2.11372841e-02, 1.81758646e-02,
       1.80478077e-02, 1.65228639e-02, 1.55075006e-02, 1.27541861e-02,
       1.12466970e-02, 1.24145634e-02, 1.20474407e-02, 1.09734135e-02,
       1.00068841e-02, 1.06369033e-02, 1.12501457e-02, 1.16684642e-02,
       9.71117616e-03, 9.58298892e-03, 9.61237121e-03, 9.55455657e-03,
       9.76762362e-03, 1.02562634e-02, 9.34584532e-03, 8.92794598e-03,
       9.51405521e-03, 9.44814924e-03, 9.20096785e-03, 9.09277238e-03,
       8.38163868e-03, 8.41708854e-03, 8.41432996e-03, 7.14715524e-03,
       7.98082165e-03, 8.83140601e-03, 7.99081381e-03, 8.02045316e-03,
       7.78246671e-03, 8.94837547e-03, 8.09417851e-03, 8.00068583e-03,
       7.34653696e-03, 8.02976545e-03, 7.93727767e-03, 7.48019805e-03,
       7.49919470e-03, 7.87938386e-03, 7.77373137e-03, 7.88705889e-03,
       8.31951480e-03, 7.64988083e-03, 7.48078013e-03, 7.67526543e-03,
       8.13236553e-03, 7.90031720e-03, 6.98836194e-03, 7.61722075e-03,
       7.75263691e-03, 7.75971264e-03, 7.80881057e-03, 7.37115275e-03,
       7.29903765e-03, 7.00414460e-03, 3.10720433e-03], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-dc065cfe-975f-443a-8d46-ee5cf1b83989' class='xr-section-summary-in' type='checkbox'  checked><label for='section-dc065cfe-975f-443a-8d46-ee5cf1b83989' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>wavenumber</span></div><div class='xr-var-dims'>(wavenumber)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.001004 ... 0.07728 0.07829</div><input id='attrs-114e931d-f0f2-494f-92ec-6d0a941d28bd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-114e931d-f0f2-494f-92ec-6d0a941d28bd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cacdbd88-4366-46d7-b5b3-8d0702268e9a' class='xr-var-data-in' type='checkbox'><label for='data-cacdbd88-4366-46d7-b5b3-8d0702268e9a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.      , 0.001004, 0.002007, 0.003011, 0.004015, 0.005018, 0.006022,
       0.007026, 0.008029, 0.009033, 0.010037, 0.01104 , 0.012044, 0.013048,
       0.014051, 0.015055, 0.016059, 0.017062, 0.018066, 0.01907 , 0.020073,
       0.021077, 0.022081, 0.023084, 0.024088, 0.025092, 0.026095, 0.027099,
       0.028103, 0.029106, 0.03011 , 0.031114, 0.032117, 0.033121, 0.034125,
       0.035128, 0.036132, 0.037136, 0.038139, 0.039143, 0.040147, 0.04115 ,
       0.042154, 0.043158, 0.044161, 0.045165, 0.046169, 0.047172, 0.048176,
       0.04918 , 0.050183, 0.051187, 0.052191, 0.053194, 0.054198, 0.055202,
       0.056206, 0.057209, 0.058213, 0.059217, 0.06022 , 0.061224, 0.062228,
       0.063231, 0.064235, 0.065239, 0.066242, 0.067246, 0.06825 , 0.069253,
       0.070257, 0.071261, 0.072264, 0.073268, 0.074272, 0.075275, 0.076279,
       0.077283, 0.078286])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-69558928-385b-47bc-919f-34ea05bc89d2' class='xr-section-summary-in' type='checkbox'  ><label for='section-69558928-385b-47bc-919f-34ea05bc89d2' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>wavenumber</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-7040fe4d-17d6-4931-8feb-d0b6c6c9a4b9' class='xr-index-data-in' type='checkbox'/><label for='index-7040fe4d-17d6-4931-8feb-d0b6c6c9a4b9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([                  0.0,  0.001003669810264894,
               0.002007339620529788, 0.0030110094307946823,
               0.004014679241059576,   0.00501834905132447,
               0.006022018861589365,  0.007025688671854258,
               0.008029358482119152,  0.009033028292384046,
                0.01003669810264894,  0.011040367912913834,
                0.01204403772317873,  0.013047707533443623,
               0.014051377343708517,   0.01505504715397341,
               0.016058716964238304,    0.0170623867745032,
               0.018066056584768092,  0.019069726395032988,
                0.02007339620529788,  0.021077066015562775,
               0.022080735825827667,  0.023084405636092563,
                0.02408807544635746,   0.02509174525662235,
               0.026095415066887246,  0.027099084877152138,
               0.028102754687417034,  0.029106424497681926,
                0.03011009430794682,  0.031113764118211713,
                0.03211743392847661,  0.033121103738741504,
                 0.0341247735490064,   0.03512844335927129,
               0.036132113169536184,   0.03713578297980108,
               0.038139452790065975,  0.039143122600330864,
                0.04014679241059576,  0.041150462220860655,
                0.04215413203112555,  0.043157801841390446,
               0.044161471651655335,   0.04516514146192023,
               0.046168811272185126,   0.04717248108245002,
                0.04817615089271492,  0.049179820702979805,
                 0.0501834905132447,  0.051187160323509596,
                0.05219083013377449,   0.05319449994403938,
               0.054198169754304276,   0.05520183956456917,
                0.05620550937483407,   0.05720917918509896,
                0.05821284899536385,   0.05921651880562875,
                0.06022018861589364,   0.06122385842615854,
                0.06222752823642343,   0.06323119804668832,
                0.06423486785695322,   0.06523853766721811,
                0.06624220747748301,    0.0672458772877479,
                 0.0682495470980128,   0.06925321690827768,
                0.07025688671854258,   0.07126055652880747,
                0.07226422633907237,   0.07326789614933726,
                0.07427156595960216,   0.07527523576986705,
                0.07627890558013195,   0.07728257539039685,
                0.07828624520066173],
             dtype=&#x27;float64&#x27;, name=&#x27;wavenumber&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d881107f-147f-4a90-95c4-2e0f564eb09e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d881107f-147f-4a90-95c4-2e0f564eb09e' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<section id="figure">
<h4>Figure<a class="headerlink" href="#figure" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PlotPSDIsotropic</span><span class="p">:</span>
        
    <span class="k">def</span> <span class="nf">init_fig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="k">if</span> <span class="n">figsize</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">figsize</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">plot_wavenumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span><span class="n">freq_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavenumber [cycles/</span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavenumber&quot;</span>
            
        <span class="n">dim</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">da</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">*</span> <span class="n">freq_scale</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">yscale</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">xscale</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
            <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;PSD [</span><span class="si">{</span><span class="n">da</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">,</span>
            <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.00025</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span><span class="mf">0.025</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">plot_wavelength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">freq_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavelength [</span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavelength&quot;</span>
        
        <span class="n">dim</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">da</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">*</span> <span class="n">freq_scale</span><span class="p">),</span> <span class="n">da</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">yscale</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="n">xscale</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
            <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;PSD [</span><span class="si">{</span><span class="n">da</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{x:.0f}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">invert_xaxis</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">plot_both</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">freq_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavelength [</span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Wavelength&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_wavenumber</span><span class="p">(</span><span class="n">da</span><span class="o">=</span><span class="n">da</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span> <span class="n">freq_scale</span><span class="o">=</span><span class="n">freq_scale</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">secax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">secondary_xaxis</span><span class="p">(</span>
            <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">functions</span><span class="o">=</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">1e-20</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">1e-20</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{x:.0f}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">psd_iso_plot</span> <span class="o">=</span> <span class="n">PlotPSDIsotropic</span><span class="p">()</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">init_fig</span><span class="p">()</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">plot_both</span><span class="p">(</span>
    <span class="n">ds_psd</span><span class="p">,</span>
    <span class="n">freq_scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;km&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;NADIR&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">plot_both</span><span class="p">(</span>
    <span class="n">ds_psd_interp</span><span class="p">,</span>
    <span class="n">freq_scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;km&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;DUACS&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;tab:green&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># set custom bounds</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.00025</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span><span class="mf">0.025</span><span class="p">))</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;PSD [SSH]&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1f1e516d4717bb019ddc305044653b8ecc3d12de0ae8c6c75c8e19099ddcfcb8.png" src="../../_images/1f1e516d4717bb019ddc305044653b8ecc3d12de0ae8c6c75c8e19099ddcfcb8.png" />
</div>
</div>
</section>
</section>
<section id="power-spectrum-score">
<h3>Power Spectrum Score<a class="headerlink" href="#power-spectrum-score" title="Permalink to this headline">#</a></h3>
<div class="math notranslate nohighlight">
\[
\text{PSD}(u,\hat{u}) = 1 - \frac{\mathcal{F}(u) - \mathcal{F}(\hat{u})}{\mathcal{F}(u)}
\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathcal{F}\)</span> is the power spectrum transformation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">oceanbench._src.metrics.utils</span> <span class="kn">import</span> <span class="n">find_intercept_1D</span><span class="p">,</span> <span class="n">find_intercept_2D</span>
</pre></div>
</div>
</div>
</div>
<section id="resolved-scale">
<h4>Resolved Scale<a class="headerlink" href="#resolved-scale" title="Permalink to this headline">#</a></h4>
<p>We can assign an arbitrary threshhold which we decide as the “resolved scale” for the quantity of interest. In this case, we decided 0.5 which is the minimum signal-to-noise ratio that we deem trustworthy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">find_intercept_1D</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">ds_psd_score</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">ds_psd_score</span><span class="o">.</span><span class="n">wavenumber</span><span class="p">),</span> 
    <span class="n">level</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;slinear&quot;</span><span class="p">,</span>
    <span class="n">fill_value</span><span class="o">=</span><span class="s2">&quot;extrapolate&quot;</span>
<span class="p">)</span>        
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array(152.67922533)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id1">
<h4>Figure<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PlotPSDScoreIsotropic</span><span class="p">(</span><span class="n">PlotPSDIsotropic</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">_add_score</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">da</span><span class="p">,</span>
        <span class="n">freq_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> 
        <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">threshhold</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> 
        <span class="n">threshhold_color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="p">):</span>
        
        <span class="n">dim</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;PSD Score&quot;</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span>
            <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.00025</span><span class="p">,</span>
            <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span><span class="mf">0.025</span><span class="p">,</span>
        <span class="p">))</span>
        
        <span class="n">resolved_scale</span> <span class="o">=</span> <span class="n">freq_scale</span> <span class="o">/</span> <span class="n">find_intercept_1D</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">da</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">da</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">+</span><span class="mf">1e-15</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="n">threshhold</span>
        <span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">resolved_scale</span><span class="p">,</span> 
            <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">threshhold</span><span class="p">,</span> 
            <span class="n">color</span><span class="o">=</span><span class="n">threshhold_color</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span>
            <span class="n">y</span><span class="o">=</span><span class="n">threshhold</span><span class="p">,</span>
            <span class="n">xmin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_invalid</span><span class="p">(</span><span class="n">da</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">freq_scale</span><span class="p">)),</span>
            <span class="n">xmax</span><span class="o">=</span><span class="n">resolved_scale</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">threshhold_color</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span>
        <span class="p">)</span>        
        <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="mi">1</span><span class="o">/</span><span class="n">resolved_scale</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">resolved_scale</span><span class="p">,</span> <span class="n">threshhold</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">threshhold_color</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span>
        <span class="p">)</span>
        
        
    <span class="k">def</span> <span class="nf">plot_score</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">da</span><span class="p">,</span> 
        <span class="n">freq_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> 
        <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">threshhold</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> 
        <span class="n">threshhold_color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_both</span><span class="p">(</span><span class="n">da</span><span class="o">=</span><span class="n">da</span><span class="p">,</span> <span class="n">freq_scale</span><span class="o">=</span><span class="n">freq_scale</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_score</span><span class="p">(</span>
            <span class="n">da</span><span class="o">=</span><span class="n">da</span><span class="p">,</span> 
            <span class="n">freq_scale</span><span class="o">=</span><span class="n">freq_scale</span><span class="p">,</span>
            <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span>
            <span class="n">threshhold</span><span class="o">=</span><span class="n">threshhold</span><span class="p">,</span> 
            <span class="n">threshhold_color</span><span class="o">=</span><span class="n">threshhold_color</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">psd_iso_plot</span> <span class="o">=</span> <span class="n">PlotPSDScoreIsotropic</span><span class="p">()</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">init_fig</span><span class="p">()</span>
<span class="n">psd_iso_plot</span><span class="o">.</span><span class="n">plot_score</span><span class="p">(</span>
    <span class="n">ds_psd_score</span><span class="p">,</span>
    <span class="n">freq_scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;km&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;DUACS&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">threshhold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">threshhold_color</span><span class="o">=</span><span class="s2">&quot;tab:blue&quot;</span>
    
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No artists with labels found to put in legend.  Note that artists whose label start with an underscore are ignored when legend() is called with no argument.
</pre></div>
</div>
<img alt="../../_images/b650ce049ed5b4ea0a66a0ff96134ac068458cdc7c66e28c8fda1f0347e08908.png" src="../../_images/b650ce049ed5b4ea0a66a0ff96134ac068458cdc7c66e28c8fda1f0347e08908.png" />
</div>
</div>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-jejeqx-py"
        },
        kernelOptions: {
            name: "conda-env-jejeqx-py",
            path: "./content/alongtrack"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-jejeqx-py'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="AlongTrack_SWOT.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">AlongTrack Data - SWOT</p>
      </div>
    </a>
    <a class="right-next"
       href="../ml/xrdataset.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">XArrayDataset</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#field">Field</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gridding">Gridding</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regridding">Regridding</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alongtrack-segments">AlongTrack Segments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#real-statistics">Real Statistics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics">Statistics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-statistics">Spectral Statistics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#power-spectrum">Power Spectrum</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#figure">Figure</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#power-spectrum-score">Power Spectrum Score</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolved-scale">Resolved Scale</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Figure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By J. Emmanuel Johnson, Quentin Febvre
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>